<!DOCTYPE HTML>
<html lang="en" class="ayu" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Zerokit API - Logos LIP</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/fonts/fonts.css">
        <link rel="stylesheet" href="../../theme/FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../custom.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('ayu')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../index.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="../../about.html">About</a></li><li class="chapter-item expanded "><a href="../../messaging/index.html"><strong aria-hidden="true">1.</strong> Messaging</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../messaging/standards/core/index.html"><strong aria-hidden="true">1.1.</strong> Standards - Core</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../messaging/standards/core/10/waku2.html"><strong aria-hidden="true">1.1.1.</strong> 10/Waku2</a></li><li class="chapter-item expanded "><a href="../../messaging/standards/core/11/relay.html"><strong aria-hidden="true">1.1.2.</strong> 11/Relay</a></li><li class="chapter-item expanded "><a href="../../messaging/standards/core/12/filter.html"><strong aria-hidden="true">1.1.3.</strong> 12/Filter</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../messaging/standards/core/12/previous-versions/00/filter.html"><strong aria-hidden="true">1.1.3.1.</strong> 00 (previous)</a></li></ol></li><li class="chapter-item expanded "><a href="../../messaging/standards/core/13/store.html"><strong aria-hidden="true">1.1.4.</strong> 13/Store</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../messaging/standards/core/13/previous-versions/00/store.html"><strong aria-hidden="true">1.1.4.1.</strong> 00 (previous)</a></li></ol></li><li class="chapter-item expanded "><a href="../../messaging/standards/core/14/message.html"><strong aria-hidden="true">1.1.5.</strong> 14/Message</a></li><li class="chapter-item expanded "><a href="../../messaging/standards/core/15/bridge.html"><strong aria-hidden="true">1.1.6.</strong> 15/Bridge</a></li><li class="chapter-item expanded "><a href="../../messaging/standards/core/17/rln-relay.html"><strong aria-hidden="true">1.1.7.</strong> 17/RLN Relay</a></li><li class="chapter-item expanded "><a href="../../messaging/standards/core/19/lightpush.html"><strong aria-hidden="true">1.1.8.</strong> 19/Lightpush</a></li><li class="chapter-item expanded "><a href="../../messaging/standards/core/31/enr.html"><strong aria-hidden="true">1.1.9.</strong> 31/ENR</a></li><li class="chapter-item expanded "><a href="../../messaging/standards/core/33/discv5.html"><strong aria-hidden="true">1.1.10.</strong> 33/Discv5</a></li><li class="chapter-item expanded "><a href="../../messaging/standards/core/34/peer-exchange.html"><strong aria-hidden="true">1.1.11.</strong> 34/Peer Exchange</a></li><li class="chapter-item expanded "><a href="../../messaging/standards/core/36/bindings-api.html"><strong aria-hidden="true">1.1.12.</strong> 36/Bindings API</a></li><li class="chapter-item expanded "><a href="../../messaging/standards/core/64/network.html"><strong aria-hidden="true">1.1.13.</strong> 64/Network</a></li><li class="chapter-item expanded "><a href="../../messaging/standards/core/66/metadata.html"><strong aria-hidden="true">1.1.14.</strong> 66/Metadata</a></li></ol></li><li class="chapter-item expanded "><a href="../../messaging/standards/application/index.html"><strong aria-hidden="true">1.2.</strong> Standards - Application</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../messaging/standards/application/20/toy-eth-pm.html"><strong aria-hidden="true">1.2.1.</strong> 20/Toy ETH PM</a></li><li class="chapter-item expanded "><a href="../../messaging/standards/application/26/payload.html"><strong aria-hidden="true">1.2.2.</strong> 26/Payload</a></li><li class="chapter-item expanded "><a href="../../messaging/standards/application/53/x3dh.html"><strong aria-hidden="true">1.2.3.</strong> 53/X3DH</a></li><li class="chapter-item expanded "><a href="../../messaging/standards/application/54/x3dh-sessions.html"><strong aria-hidden="true">1.2.4.</strong> 54/X3DH Sessions</a></li></ol></li><li class="chapter-item expanded "><a href="../../messaging/standards/legacy/index.html"><strong aria-hidden="true">1.3.</strong> Standards - Legacy</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../messaging/standards/legacy/6/waku1.html"><strong aria-hidden="true">1.3.1.</strong> 6/Waku1</a></li><li class="chapter-item expanded "><a href="../../messaging/standards/legacy/7/data.html"><strong aria-hidden="true">1.3.2.</strong> 7/Data</a></li><li class="chapter-item expanded "><a href="../../messaging/standards/legacy/8/mail.html"><strong aria-hidden="true">1.3.3.</strong> 8/Mail</a></li><li class="chapter-item expanded "><a href="../../messaging/standards/legacy/9/rpc.html"><strong aria-hidden="true">1.3.4.</strong> 9/RPC</a></li></ol></li><li class="chapter-item expanded "><a href="../../messaging/informational/index.html"><strong aria-hidden="true">1.4.</strong> Informational</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../messaging/informational/22/toy-chat.html"><strong aria-hidden="true">1.4.1.</strong> 22/Toy Chat</a></li><li class="chapter-item expanded "><a href="../../messaging/informational/23/topics.html"><strong aria-hidden="true">1.4.2.</strong> 23/Topics</a></li><li class="chapter-item expanded "><a href="../../messaging/informational/27/peers.html"><strong aria-hidden="true">1.4.3.</strong> 27/Peers</a></li><li class="chapter-item expanded "><a href="../../messaging/informational/29/config.html"><strong aria-hidden="true">1.4.4.</strong> 29/Config</a></li><li class="chapter-item expanded "><a href="../../messaging/informational/30/adaptive-nodes.html"><strong aria-hidden="true">1.4.5.</strong> 30/Adaptive Nodes</a></li></ol></li><li class="chapter-item expanded "><a href="../../messaging/deprecated/index.html"><strong aria-hidden="true">1.5.</strong> Deprecated</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../messaging/deprecated/5/waku0.html"><strong aria-hidden="true">1.5.1.</strong> 5/Waku0</a></li><li class="chapter-item expanded "><a href="../../messaging/deprecated/16/rpc.html"><strong aria-hidden="true">1.5.2.</strong> 16/RPC</a></li><li class="chapter-item expanded "><a href="../../messaging/deprecated/18/swap.html"><strong aria-hidden="true">1.5.3.</strong> 18/Swap</a></li><li class="chapter-item expanded "><a href="../../messaging/deprecated/fault-tolerant-store.html"><strong aria-hidden="true">1.5.4.</strong> Fault Tolerant Store</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../blockchain/index.html"><strong aria-hidden="true">2.</strong> Blockchain</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../blockchain/raw/index.html"><strong aria-hidden="true">2.1.</strong> Raw</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../blockchain/raw/nomosda-encoding.html"><strong aria-hidden="true">2.1.1.</strong> NomosDA Encoding</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/nomosda-network.html"><strong aria-hidden="true">2.1.2.</strong> NomosDA Network</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/p2p-hardware-requirements.html"><strong aria-hidden="true">2.1.3.</strong> P2P Hardware Requirements</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/p2p-nat-solution.html"><strong aria-hidden="true">2.1.4.</strong> P2P NAT Solution</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/p2p-network-bootstrapping.html"><strong aria-hidden="true">2.1.5.</strong> P2P Network Bootstrapping</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/p2p-network.html"><strong aria-hidden="true">2.1.6.</strong> P2P Network</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/bedrock-service-declaration-protocol.html"><strong aria-hidden="true">2.1.7.</strong> Bedrock Service Declaration Protocol</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/bedrock-anonymous-leaders-reward.html"><strong aria-hidden="true">2.1.8.</strong> Bedrock Anonymous Leaders Reward</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/bedrock-genesis-block.html"><strong aria-hidden="true">2.1.9.</strong> Bedrock Genesis Block</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/bedrock-service-reward-distribution.html"><strong aria-hidden="true">2.1.10.</strong> Bedrock Service Reward Distribution</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/bedrock-v1.1-block-construction.html"><strong aria-hidden="true">2.1.11.</strong> Bedrock v1.1 Block Construction</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/bedrock-v1.1-mantle-specification.html"><strong aria-hidden="true">2.1.12.</strong> Bedrock v1.1 Mantle Specification</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/cryptarchia-proof-of-leadership.html"><strong aria-hidden="true">2.1.13.</strong> Cryptarchia Proof of Leadership</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/cryptarchia-total-stake-inference.html"><strong aria-hidden="true">2.1.14.</strong> Cryptarchia Total Stake Inference</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/cryptarchia-v1-bootstr-sync.html"><strong aria-hidden="true">2.1.15.</strong> Cryptarchia v1 Bootstrapping & Synchronization</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/nomos-blend-protocol.html"><strong aria-hidden="true">2.1.16.</strong> Nomos Blend Protocol</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/nomos-cryptarchia-v1-protocol.html"><strong aria-hidden="true">2.1.17.</strong> Nomos Cryptarchia v1 Protocol</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/nomos-key-types-and-generation.html"><strong aria-hidden="true">2.1.18.</strong> Nomos Key Types and Generation</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/nomos-message-encapsulation.html"><strong aria-hidden="true">2.1.19.</strong> Nomos Message Encapsulation</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/nomos-message-formatting.html"><strong aria-hidden="true">2.1.20.</strong> Nomos Message Formatting</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/nomos-payload-formatting.html"><strong aria-hidden="true">2.1.21.</strong> Nomos Payload Formatting</a></li><li class="chapter-item expanded "><a href="../../blockchain/raw/nomos-proof-of-quota.html"><strong aria-hidden="true">2.1.22.</strong> Nomos Proof of Quota</a></li></ol></li><li class="chapter-item expanded "><a href="../../blockchain/deprecated/index.html"><strong aria-hidden="true">2.2.</strong> Deprecated</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../blockchain/deprecated/claro.html"><strong aria-hidden="true">2.2.1.</strong> Claro</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../storage/index.html"><strong aria-hidden="true">3.</strong> Storage</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../storage/raw/index.html"><strong aria-hidden="true">3.1.</strong> Raw</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../storage/raw/codex-block-exchange.html"><strong aria-hidden="true">3.1.1.</strong> Block Exchange</a></li><li class="chapter-item expanded "><a href="../../storage/raw/codex-merkle-tree.html"><strong aria-hidden="true">3.1.2.</strong> Codex Merkle Tree</a></li><li class="chapter-item expanded "><a href="../../storage/raw/codex-marketplace.html"><strong aria-hidden="true">3.1.3.</strong> Marketplace</a></li><li class="chapter-item expanded "><a href="../../storage/raw/codex-prover.html"><strong aria-hidden="true">3.1.4.</strong> Codex Prover</a></li><li class="chapter-item expanded "><a href="../../storage/raw/codex-store.html"><strong aria-hidden="true">3.1.5.</strong> Codex Store</a></li><li class="chapter-item expanded "><a href="../../storage/raw/community-history.html"><strong aria-hidden="true">3.1.6.</strong> Community History</a></li><li class="chapter-item expanded "><a href="../../storage/raw/dht.html"><strong aria-hidden="true">3.1.7.</strong> DHT</a></li><li class="chapter-item expanded "><a href="../../storage/raw/erasure-coding.html"><strong aria-hidden="true">3.1.8.</strong> Erasure Coding</a></li><li class="chapter-item expanded "><a href="../../storage/raw/slot-buIlder.html"><strong aria-hidden="true">3.1.9.</strong> Slot Builder</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../ift-ts/index.html"><strong aria-hidden="true">4.</strong> IFT-TS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../ift-ts/raw/index.html"><strong aria-hidden="true">4.1.</strong> Raw</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../ift-ts/raw/1/coss.html"><strong aria-hidden="true">4.1.1.</strong> 1/COSS</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/2/mvds.html"><strong aria-hidden="true">4.1.2.</strong> 2/MVDS</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/3/remote-log.html"><strong aria-hidden="true">4.1.3.</strong> 3/Remote Log</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/4/mvds-meta.html"><strong aria-hidden="true">4.1.4.</strong> 4/MVDS Meta</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/25/libp2p-dns-discovery.html"><strong aria-hidden="true">4.1.5.</strong> 25/Libp2p DNS Discovery</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/32/rln-v1.html"><strong aria-hidden="true">4.1.6.</strong> 32/RLN-V1</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/consensus-hashgraphlike.html"><strong aria-hidden="true">4.1.7.</strong> Consensus Hashgraphlike</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/decentralized-messaging-ethereum.html"><strong aria-hidden="true">4.1.8.</strong> Decentralized Messaging Ethereum</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/eth-mls-offchain.html"><strong aria-hidden="true">4.1.9.</strong> ETH MLS Offchain</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/eth-mls-onchain.html"><strong aria-hidden="true">4.1.10.</strong> ETH MLS Onchain</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/deleted/eth-secpm.html"><strong aria-hidden="true">4.1.11.</strong> ETH SecPM</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/extensible-peer-records.html"><strong aria-hidden="true">4.1.12.</strong> Extensible Peer Records</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/gossipsub-tor-push.html"><strong aria-hidden="true">4.1.13.</strong> Gossipsub Tor Push</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/logos-capability-discovery.html"><strong aria-hidden="true">4.1.14.</strong> Logos Capability Discovery</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/mix.html"><strong aria-hidden="true">4.1.15.</strong> Mix</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/noise-x3dh-double-ratchet.html"><strong aria-hidden="true">4.1.16.</strong> Noise X3DH Double Ratchet</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/rln-interep-spec.html"><strong aria-hidden="true">4.1.17.</strong> RLN Interep Spec</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/rln-stealth-commitments.html"><strong aria-hidden="true">4.1.18.</strong> RLN Stealth Commitments</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/multi-message_id-burn-rln.html"><strong aria-hidden="true">4.1.19.</strong> Multi-message_id Burn RLN</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/rln-v2.html"><strong aria-hidden="true">4.1.20.</strong> RLN-V2</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/zerokit-api.html" class="active"><strong aria-hidden="true">4.1.21.</strong> Zerokit API</a></li><li class="chapter-item expanded "><a href="../../ift-ts/raw/sds.html"><strong aria-hidden="true">4.1.22.</strong> SDS</a></li></ol></li><li class="chapter-item expanded "><a href="../../ift-ts/template.html"><strong aria-hidden="true">4.2.</strong> Template</a></li></ol></li><li class="chapter-item expanded "><a href="../../archived/index.html"><strong aria-hidden="true">5.</strong> Archived</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../archived/status/index.html"><strong aria-hidden="true">5.1.</strong> Status</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../archived/status/24/curation.html"><strong aria-hidden="true">5.1.1.</strong> 24/Curation</a></li><li class="chapter-item expanded "><a href="../../archived/status/28/featuring.html"><strong aria-hidden="true">5.1.2.</strong> 28/Featuring</a></li><li class="chapter-item expanded "><a href="../../archived/status/55/1to1-chat.html"><strong aria-hidden="true">5.1.3.</strong> 55/1-to-1 Chat</a></li><li class="chapter-item expanded "><a href="../../archived/status/56/communities.html"><strong aria-hidden="true">5.1.4.</strong> 56/Communities</a></li><li class="chapter-item expanded "><a href="../../archived/status/61/community-history-service.html"><strong aria-hidden="true">5.1.5.</strong> 61/Community History Service</a></li><li class="chapter-item expanded "><a href="../../archived/status/62/payloads.html"><strong aria-hidden="true">5.1.6.</strong> 62/Payloads</a></li><li class="chapter-item expanded "><a href="../../archived/status/63/keycard-usage.html"><strong aria-hidden="true">5.1.7.</strong> 63/Keycard Usage</a></li><li class="chapter-item expanded "><a href="../../archived/status/65/account-address.html"><strong aria-hidden="true">5.1.8.</strong> 65/Account Address</a></li><li class="chapter-item expanded "><a href="../../archived/status/71/push-notification-server.html"><strong aria-hidden="true">5.1.9.</strong> 71/Push Notification Server</a></li><li class="chapter-item expanded "><a href="../../archived/status/raw/index.html"><strong aria-hidden="true">5.1.10.</strong> Raw</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../archived/status/raw/simple-scaling.html"><strong aria-hidden="true">5.1.10.1.</strong> Simple Scaling</a></li><li class="chapter-item expanded "><a href="../../archived/status/raw/status-app-protocols.html"><strong aria-hidden="true">5.1.10.2.</strong> Status App Protocols</a></li><li class="chapter-item expanded "><a href="../../archived/status/raw/status-mvds.html"><strong aria-hidden="true">5.1.10.3.</strong> Status MVDS</a></li><li class="chapter-item expanded "><a href="../../archived/status/raw/url-data.html"><strong aria-hidden="true">5.1.10.4.</strong> URL Data</a></li><li class="chapter-item expanded "><a href="../../archived/status/raw/url-scheme.html"><strong aria-hidden="true">5.1.10.5.</strong> URL Scheme</a></li></ol></li><li class="chapter-item expanded "><a href="../../archived/status/deprecated/index.html"><strong aria-hidden="true">5.1.11.</strong> Deprecated</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../archived/status/deprecated/3rd-party.html"><strong aria-hidden="true">5.1.11.1.</strong> 3rd Party</a></li><li class="chapter-item expanded "><a href="../../archived/status/deprecated/account.html"><strong aria-hidden="true">5.1.11.2.</strong> Account</a></li><li class="chapter-item expanded "><a href="../../archived/status/deprecated/client.html"><strong aria-hidden="true">5.1.11.3.</strong> Client</a></li><li class="chapter-item expanded "><a href="../../archived/status/deprecated/dapp-browser-API-usage.html"><strong aria-hidden="true">5.1.11.4.</strong> Dapp Browser API Usage</a></li><li class="chapter-item expanded "><a href="../../archived/status/deprecated/eips.html"><strong aria-hidden="true">5.1.11.5.</strong> EIPs</a></li><li class="chapter-item expanded "><a href="../../archived/status/deprecated/ethereum-usage.html"><strong aria-hidden="true">5.1.11.6.</strong> Ethereum Usage</a></li><li class="chapter-item expanded "><a href="../../archived/status/deprecated/group-chat.html"><strong aria-hidden="true">5.1.11.7.</strong> Group Chat</a></li><li class="chapter-item expanded "><a href="../../archived/status/deprecated/IPFS-gateway-for-sticker-Pack.html"><strong aria-hidden="true">5.1.11.8.</strong> IPFS Gateway for Sticker Pack</a></li><li class="chapter-item expanded "><a href="../../archived/status/deprecated/keycard-usage-for-wallet-and-chat-keys.html"><strong aria-hidden="true">5.1.11.9.</strong> Keycard Usage for Wallet and Chat Keys</a></li><li class="chapter-item expanded "><a href="../../archived/status/deprecated/notifications.html"><strong aria-hidden="true">5.1.11.10.</strong> Notifications</a></li><li class="chapter-item expanded "><a href="../../archived/status/deprecated/payloads.html"><strong aria-hidden="true">5.1.11.11.</strong> Payloads</a></li><li class="chapter-item expanded "><a href="../../archived/status/deprecated/push-notification-server.html"><strong aria-hidden="true">5.1.11.12.</strong> Push Notification Server</a></li><li class="chapter-item expanded "><a href="../../archived/status/deprecated/secure-transport.html"><strong aria-hidden="true">5.1.11.13.</strong> Secure Transport</a></li><li class="chapter-item expanded "><a href="../../archived/status/deprecated/waku-mailserver.html"><strong aria-hidden="true">5.1.11.14.</strong> Waku Mailserver</a></li><li class="chapter-item expanded "><a href="../../archived/status/deprecated/waku-usage.html"><strong aria-hidden="true">5.1.11.15.</strong> Waku Usage</a></li><li class="chapter-item expanded "><a href="../../archived/status/deprecated/whisper-mailserver.html"><strong aria-hidden="true">5.1.11.16.</strong> Whisper Mailserver</a></li><li class="chapter-item expanded "><a href="../../archived/status/deprecated/whisper-usage.html"><strong aria-hidden="true">5.1.11.17.</strong> Whisper Usage</a></li></ol></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Logos LIP</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/vacp2p/rfc-index" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="zerokit-api"><a class="header" href="#zerokit-api">Zerokit API</a></h1>
<div class="table-wrapper"><table><thead><tr><th>Field</th><th>Value</th></tr></thead><tbody>
<tr><td>Name</td><td>Zerokit API</td></tr>
<tr><td>Slug</td><td>142</td></tr>
<tr><td>Status</td><td>raw</td></tr>
<tr><td>Category</td><td>Standards Track</td></tr>
<tr><td>Editor</td><td>Vinh Trinh <a href="mailto:vinh@status.im">vinh@status.im</a></td></tr>
</tbody></table>
</div><!-- timeline:start -->
<h2 id="timeline"><a class="header" href="#timeline">Timeline</a></h2>
<ul>
<li><strong>2026-01-21</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/70f3cfb4df4e9a94e56b1284e98ee1dc9df50ac7/docs/ift-ts/raw/zerokit-api.md"><code>70f3cfb</code></a> — chore: mdbook font fix (#266)</li>
</ul>
<!-- timeline:end -->
<h2 id="abstract"><a class="header" href="#abstract">Abstract</a></h2>
<p>This document specifies the Zerokit API, an implementation of the RLN-V2 protocol.
The specification covers the unified interface exposed through <strong>native Rust</strong>,
C-compatible Foreign Function Interface (FFI) bindings,
and WebAssembly (WASM) bindings.</p>
<h2 id="motivation"><a class="header" href="#motivation">Motivation</a></h2>
<p>The main goal of this RFC is to define the API contract,
serialization formats,
and architectural guidance for integrating the Zerokit library
across all supported platforms.
Zerokit is the reference implementation of the RLN-V2 protocol.</p>
<h2 id="format-specification"><a class="header" href="#format-specification">Format Specification</a></h2>
<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”,
“SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document
are to be interpreted as described in <a href="https://www.ietf.org/rfc/rfc2119.txt">2119</a>.</p>
<h3 id="important-note"><a class="header" href="#important-note">Important Note</a></h3>
<p>All terms and parameters used remain the same as in <a href="rln-v2.html">RLN-V2</a> and <a href="32/rln-v1.html#technical-overview">RLN-V1</a>.</p>
<h3 id="architecture-overview"><a class="header" href="#architecture-overview">Architecture Overview</a></h3>
<p>Zerokit follows a layered architecture where
the core RLN logic is implemented once in <strong>Rust</strong> and
exposed through platform-specific bindings.
The protocol layer handles zero-knowledge proof generation and verification,
Merkle tree operations, and cryptographic primitives.
This core is wrapped by three interface layers:
<strong>native Rust</strong> for direct library integration,
<strong>FFI</strong> for C-compatible bindings consumed by languages (such as C and Nim),
and <strong>WASM</strong> for browser and Node.js environments.
All three interfaces maintain functional parity and
share identical serialization formats for inputs and outputs.</p>
<pre><code class="language-text">      ┌─────────────────────────────────────────────────────┐
      │                  Application Layer                  │
      └──────────┬───────────────┬───────────────┬──────────┘
                 │               │               │
          ┌──────▼───────┐ ┌─────▼─────┐ ┌───────▼─────┐
          │    FFI API   │ │ WASM API  │ │   Rust API  │
          │   (C/Nim/..) │ │ (Browser) │ │   (Native)  │
          └──────┬───────┘ └─────┬─────┘ └───────┬─────┘
                 └───────────────┼───────────────┘
                                 │
                       ┌─────────▼─────────┐
                       │   RLN Protocol    │
                       │   (Rust Core)     │
                       └───────────────────┘
</code></pre>
<h3 id="supported-features"><a class="header" href="#supported-features">Supported Features</a></h3>
<p>Zerokit provides <a href="https://github.com/vacp2p/zerokit/blob/c35e62a63517b0d32e91677422de4603760e41fa/rln/Cargo.toml#L65">compile-time feature flags</a> that
select the Merkle tree storage backend,
configure the RLN operational mode (e.g., stateful vs. stateless),
and enable or disable parallel execution.</p>
<h4 id="merkle-tree-backends"><a class="header" href="#merkle-tree-backends">Merkle Tree Backends</a></h4>
<p><code>fullmerkletree</code> allocates the complete tree structure in memory.
This backend provides the fastest performance but consumes the most memory.</p>
<p><code>optimalmerkletree</code> uses sparse HashMap storage that only allocates nodes as needed.
This backend balances performance and memory efficiency.</p>
<p><code>pmtree</code> persists the tree to disk using a sled database.
This backend enables state durability across process restarts.</p>
<h4 id="operational-modes"><a class="header" href="#operational-modes">Operational Modes</a></h4>
<p><code>stateless</code> disables the internal Merkle tree.
Applications MUST provide the Merkle root and
membership proof externally when generating proofs.</p>
<p>When <code>stateless</code> is not enabled,
the library operates in <strong>Stateful</strong> mode and
requires one of the Merkle tree backends.</p>
<h4 id="parallelization"><a class="header" href="#parallelization">Parallelization</a></h4>
<p><code>parallel</code> enables rayon-based parallel computation for
proof generation and tree operations.</p>
<p>This flag SHOULD be enabled for end-user clients where
fastest individual proof generation time is required.
For server-side proof services handling multiple concurrent requests,
this flag SHOULD be disabled and
applications SHOULD use dedicated worker threads per proof instead.
The worker thread approach provides significantly higher throughput for
concurrent proof generation.</p>
<h2 id="the-api"><a class="header" href="#the-api">The API</a></h2>
<h3 id="overview"><a class="header" href="#overview">Overview</a></h3>
<p>The API exposes functional interfaces with strongly-typed parameters.
All three platform bindings share the same function signatures,
differing only in language-specific conventions.
Function signatures documented below are from the Rust perspective.</p>
<ul>
<li>Rust: <a href="https://github.com/vacp2p/zerokit/blob/master/rln/src/public.rs">https://github.com/vacp2p/zerokit/blob/master/rln/src/public.rs</a></li>
<li>FFI: <a href="https://github.com/vacp2p/zerokit/tree/master/rln/src/ffi">https://github.com/vacp2p/zerokit/tree/master/rln/src/ffi</a></li>
<li>WASM: <a href="https://github.com/vacp2p/zerokit/tree/master/rln-wasm">https://github.com/vacp2p/zerokit/tree/master/rln-wasm</a></li>
</ul>
<h3 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h3>
<p>Error handling differs across platform bindings.</p>
<p>For <strong>native Rust</strong>,
functions return <code>Result&lt;T, RLNError&gt;</code> where <code>RLNError</code> is an enum
representing specific error conditions.
The enum variants provide type-safe error handling and
pattern matching capabilities.</p>
<p>For <strong>WASM</strong> and <strong>FFI</strong> bindings,
errors are returned as human-readable string messages.
This simplifies cross-language error propagation at
the cost of type safety.
Applications consuming these bindings SHOULD parse error strings or
use error message prefixes to distinguish error types when needed.</p>
<h3 id="initialization"><a class="header" href="#initialization">Initialization</a></h3>
<p>Functions with the same name but different signatures are <strong>conditional compilation variants</strong>.
This means that multiple definitions exist in the source code,
but only one variant is compiled and available at runtime based on the enabled feature flags.</p>
<p><code>RLN::new(tree_depth, tree_config)</code> - <em>Available in Rust, FFI | Stateful mode</em></p>
<ul>
<li>Creates a new RLN instance by loading circuit resources from the default folder.</li>
<li>The <code>tree_config</code> parameter accepts multiple types via the <code>TreeConfigInput</code> trait: a JSON string, a direct config object (with <code>pmtree</code> feature), or an empty string for defaults.</li>
</ul>
<p><code>RLN::new()</code> - <em>Available in Rust, FFI | Stateless mode</em></p>
<ul>
<li>Creates a new stateless RLN instance by loading circuit resources from the default folder.</li>
</ul>
<p><code>RLN::new_with_params(tree_depth, zkey_data, graph_data, tree_config)</code> - <em>Available in Rust, FFI | Stateful mode</em></p>
<ul>
<li>Creates a new RLN instance with pre-loaded circuit parameters passed as byte vectors.</li>
<li>The <code>tree_config</code> parameter accepts multiple types via the <code>TreeConfigInput</code> trait.</li>
</ul>
<p><code>RLN::new_with_params(zkey_data, graph_data)</code> - <em>Available in Rust, FFI | Stateless mode</em></p>
<ul>
<li>Creates a new stateless RLN instance with pre-loaded circuit parameters.</li>
</ul>
<p><code>RLN::new_with_params(zkey_data)</code> - <em>Available in WASM | Stateless mode</em></p>
<ul>
<li>Creates a new stateless RLN instance for WASM with pre-loaded zkey data.</li>
<li>Graph data is not required as witness calculation is handled externally in WASM environments (e.g., using <a href="https://github.com/vacp2p/zerokit/blob/master/rln-wasm/resources/witness_calculator.js">witness_calculator.js</a>).</li>
</ul>
<h3 id="key-generation"><a class="header" href="#key-generation">Key Generation</a></h3>
<p><code>keygen()</code></p>
<ul>
<li>Generates a random identity keypair returning <code>(identity_secret, id_commitment)</code>.</li>
</ul>
<p><code>seeded_keygen(seed)</code></p>
<ul>
<li>Generates a deterministic identity keypair from a seed returning <code>(identity_secret, id_commitment)</code>.</li>
</ul>
<p><code>extended_keygen()</code></p>
<ul>
<li>Generates a random extended identity keypair returning <code>(identity_trapdoor, identity_nullifier, identity_secret, id_commitment)</code>.</li>
</ul>
<p><code>extended_seeded_keygen(seed)</code></p>
<ul>
<li>Generates a deterministic extended identity keypair from a seed returning <code>(identity_trapdoor, identity_nullifier, identity_secret, id_commitment)</code>.</li>
</ul>
<h3 id="merkle-tree-management"><a class="header" href="#merkle-tree-management">Merkle Tree Management</a></h3>
<p>All tree management functions are only available when <code>stateless</code> feature is <strong>NOT</strong> enabled.</p>
<p><code>set_tree(tree_depth)</code></p>
<ul>
<li>Initializes the internal Merkle tree with the specified depth.</li>
<li>Leaves are set to the default zero value.</li>
</ul>
<p><code>set_leaf(index, leaf)</code></p>
<ul>
<li>Sets a leaf value at the specified index.</li>
</ul>
<p><code>get_leaf(index)</code></p>
<ul>
<li>Returns the leaf value at the specified index.</li>
</ul>
<p><code>set_leaves_from(index, leaves)</code></p>
<ul>
<li>Sets multiple leaves starting from the specified index.</li>
<li>Updates <code>next_index</code> to <code>max(next_index, index + n)</code>.</li>
<li>If <code>n</code> leaves are passed, they will be set at positions <code>index</code>, <code>index+1</code>, ..., <code>index+n-1</code>.</li>
</ul>
<p><code>init_tree_with_leaves(leaves)</code></p>
<ul>
<li>Resets the tree state to default and initializes it with the provided leaves starting from index 0.</li>
<li>Resets the internal <code>next_index</code> to 0 before setting the leaves.</li>
</ul>
<p><code>atomic_operation(index, leaves, indices)</code></p>
<ul>
<li>Atomically inserts leaves starting from index and removes leaves at the specified indices.</li>
<li>Updates <code>next_index</code> to <code>max(next_index, index + n)</code> where <code>n</code> is the number of leaves inserted.</li>
</ul>
<p><code>set_next_leaf(leaf)</code></p>
<ul>
<li>Sets a leaf at the next available index and increments <code>next_index</code>.</li>
<li>The leaf is set at the current <code>next_index</code> value, then <code>next_index</code> is incremented.</li>
</ul>
<p><code>delete_leaf(index)</code></p>
<ul>
<li>Sets the leaf at the specified index to the default zero value.</li>
<li>Does not change the internal <code>next_index</code> value.</li>
</ul>
<p><code>leaves_set()</code></p>
<ul>
<li>Returns the number of leaves that have been set in the tree.</li>
</ul>
<p><code>get_root()</code></p>
<ul>
<li>Returns the current Merkle tree root.</li>
</ul>
<p><code>get_subtree_root(level, index)</code></p>
<ul>
<li>Returns the root of a subtree at the specified level and index.</li>
</ul>
<p><code>get_merkle_proof(index)</code></p>
<ul>
<li>Returns the Merkle proof for the leaf at the specified index as <code>(path_elements, identity_path_index)</code>.</li>
</ul>
<p><code>get_empty_leaves_indices()</code></p>
<ul>
<li>Returns indices of leaves set to zero up to the final leaf that was set.</li>
</ul>
<p><code>set_metadata(metadata)</code></p>
<ul>
<li>Stores arbitrary metadata in the RLN object for application use.</li>
<li>This metadata is not used by the RLN module.</li>
</ul>
<p><code>get_metadata()</code></p>
<ul>
<li>Returns the metadata stored in the RLN object.</li>
</ul>
<p><code>flush()</code></p>
<ul>
<li>Closes the connection to the Merkle tree database.</li>
<li>Should be called before dropping the RLN object when using persistent storage.</li>
</ul>
<h3 id="witness-construction"><a class="header" href="#witness-construction">Witness Construction</a></h3>
<p><code>RLNWitnessInput::new(identity_secret, user_message_limit, message_id, path_elements, identity_path_index, x, external_nullifier)</code></p>
<ul>
<li>Constructs a witness input for proof generation.</li>
<li>Validates that <code>message_id &lt;= user_message_limit</code> and <code>path_elements</code> and <code>identity_path_index</code> have the same length.</li>
</ul>
<h3 id="witness-calculation"><a class="header" href="#witness-calculation">Witness Calculation</a></h3>
<p>For <strong>native Rust</strong>** environments, witness calculation is handled internally by the proof generation functions.
The circuit witness is computed from the <code>RLNWitnessInput</code> and passed to the zero-knowledge proof system.</p>
<p>For <strong>WASM</strong> environments, witness calculation must be performed externally using a JavaScript witness calculator.
The workflow is:</p>
<ol>
<li>Create a <code>WasmRLNWitnessInput</code> with the required parameters</li>
<li>Export to JSON format using <code>toBigIntJson()</code> method</li>
<li>Pass the JSON to an external JavaScript witness calculator</li>
<li>Use the calculated witness with <code>generate_rln_proof_with_witness</code></li>
</ol>
<p>The witness calculator computes all intermediate values required by the RLN circuit.</p>
<h3 id="proof-generation"><a class="header" href="#proof-generation">Proof Generation</a></h3>
<p><code>generate_zk_proof(witness)</code> - <em>Available in Rust, FFI</em></p>
<ul>
<li>Generates a Groth16 zkSNARK proof from a witness.</li>
<li>Extract proof values separately using <code>proof_values_from_witness</code>.</li>
</ul>
<p><code>generate_rln_proof(witness)</code> - <em>Available in Rust, FFI</em></p>
<ul>
<li>Generates a complete RLN proof returning both the zkSNARK proof and proof values as <code>(proof, proof_values)</code>.</li>
<li>Combines proof generation and proof values extraction.</li>
</ul>
<p><code>generate_rln_proof_with_witness(calculated_witness, witness)</code></p>
<ul>
<li>Generates an RLN proof using a pre-calculated witness from an external witness calculator.</li>
<li>The <code>calculated_witness</code> should be a <code>Vec&lt;BigInt&gt;</code> obtained from the external witness calculator.</li>
<li>Returns <code>(proof, proof_values)</code>.</li>
<li>This is the primary proof generation method for <strong>WASM</strong> where witness calculation is handled by <strong>JavaScript</strong>.</li>
</ul>
<h3 id="proof-verification"><a class="header" href="#proof-verification">Proof Verification</a></h3>
<p><code>verify_zk_proof(proof, proof_values)</code></p>
<ul>
<li>Verifies only the zkSNARK proof without root or signal validation.</li>
<li>Returns <code>true</code> if the proof is valid.</li>
</ul>
<p><code>verify_rln_proof(proof, proof_values, x)</code> - <em>Stateful mode</em></p>
<ul>
<li>Verifies the proof against the internal Merkle tree root and validates that <code>x</code> matches the proof signal.</li>
<li>Returns an error if verification fails (invalid proof, invalid root, or invalid signal).</li>
</ul>
<p><code>verify_with_roots(proof, proof_values, x, roots)</code></p>
<ul>
<li>Verifies the proof against a set of acceptable roots and validates the signal.</li>
<li>If the roots slice is empty, root verification is skipped.</li>
<li>Returns an error if verification fails.</li>
</ul>
<h3 id="slashing"><a class="header" href="#slashing">Slashing</a></h3>
<p><code>recover_id_secret(proof_values_1, proof_values_2)</code></p>
<ul>
<li>Recovers the identity secret from two proof values that share the same external nullifier.</li>
<li>Used to detect and penalize rate limit violations.</li>
</ul>
<h3 id="hash-utilities"><a class="header" href="#hash-utilities">Hash Utilities</a></h3>
<p><code>poseidon_hash(inputs)</code></p>
<ul>
<li>Computes the Poseidon hash of the input field elements.</li>
</ul>
<p><code>hash_to_field_le(input)</code></p>
<ul>
<li>Hashes arbitrary bytes to a field element using little-endian byte order.</li>
</ul>
<p><code>hash_to_field_be(input)</code></p>
<ul>
<li>Hashes arbitrary bytes to a field element using big-endian byte order.</li>
</ul>
<h3 id="serialization-utilities"><a class="header" href="#serialization-utilities">Serialization Utilities</a></h3>
<p><code>rln_witness_to_bytes_le</code> / <code>rln_witness_to_bytes_be</code></p>
<ul>
<li>Serializes an RLN witness to bytes.</li>
</ul>
<p><code>bytes_le_to_rln_witness</code> / <code>bytes_be_to_rln_witness</code></p>
<ul>
<li>Deserializes bytes to an RLN witness.</li>
</ul>
<p><code>rln_proof_to_bytes_le</code> / <code>rln_proof_to_bytes_be</code></p>
<ul>
<li>Serializes an RLN proof to bytes.</li>
</ul>
<p><code>bytes_le_to_rln_proof</code> / <code>bytes_be_to_rln_proof</code></p>
<ul>
<li>Deserializes bytes to an RLN proof.</li>
</ul>
<p><code>rln_proof_values_to_bytes_le</code> / <code>rln_proof_values_to_bytes_be</code></p>
<ul>
<li>Serializes proof values to bytes.</li>
</ul>
<p><code>bytes_le_to_rln_proof_values</code> / <code>bytes_be_to_rln_proof_values</code></p>
<ul>
<li>Deserializes bytes to proof values.</li>
</ul>
<p><code>fr_to_bytes_le</code> / <code>fr_to_bytes_be</code></p>
<ul>
<li>Serializes a field element to 32 bytes.</li>
</ul>
<p><code>bytes_le_to_fr</code> / <code>bytes_be_to_fr</code></p>
<ul>
<li>Deserializes 32 bytes to a field element.</li>
</ul>
<p><code>vec_fr_to_bytes_le</code> / <code>vec_fr_to_bytes_be</code></p>
<ul>
<li>Serializes a vector of field elements to bytes.</li>
</ul>
<p><code>bytes_le_to_vec_fr</code> / <code>bytes_be_to_vec_fr</code></p>
<ul>
<li>Deserializes bytes to a vector of field elements.</li>
</ul>
<h3 id="wasm-specific-notes"><a class="header" href="#wasm-specific-notes">WASM-Specific Notes</a></h3>
<p>WASM bindings wrap the Rust API with JavaScript-compatible types. Key differences:</p>
<ul>
<li>Field elements are wrapped as <code>WasmFr</code> with <code>fromBytesLE</code>, <code>fromBytesBE</code>, <code>toBytesLE</code>, <code>toBytesBE</code> methods.</li>
<li>Vectors of field elements use <code>VecWasmFr</code> with <code>push</code>, <code>get</code>, <code>length</code> methods.</li>
<li>Identity generation uses <code>Identity.generate()</code> and <code>Identity.generateSeeded(seed)</code> static methods.</li>
<li>Extended identity uses <code>ExtendedIdentity.generate()</code> and <code>ExtendedIdentity.generateSeeded(seed)</code>.</li>
<li>Witness input uses <code>WasmRLNWitnessInput</code> constructor and <code>toBigIntJson()</code> for witness calculator integration.</li>
<li>Proof generation requires external witness calculation via <code>generateRLNProofWithWitness(calculatedWitness, witness)</code>.</li>
<li>When <code>parallel</code> feature is enabled, call <code>initThreadPool()</code> to initialize the thread pool.</li>
<li>Errors are returned as JavaScript strings that can be caught via try-catch blocks.</li>
</ul>
<h3 id="ffi-specific-notes"><a class="header" href="#ffi-specific-notes">FFI-Specific Notes</a></h3>
<p>FFI bindings use C-compatible types with the <code>ffi_</code> prefix. Key differences:</p>
<ul>
<li>Field elements are wrapped as <code>CFr</code> with corresponding conversion functions.</li>
<li>Results use <code>CResult</code> or <code>CBoolResult</code> structs with <code>ok</code> and <code>err</code> fields.</li>
<li>Errors are returned as C-compatible strings in the <code>err</code> field of result structs.</li>
<li>Memory must be explicitly freed using <code>ffi_*_free</code> functions.</li>
<li>Vectors use <code>repr_c::Vec</code> with <code>ffi_vec_*</code> helper functions.</li>
<li>Configuration is passed via file path to a JSON configuration file.</li>
</ul>
<h2 id="usage-patterns"><a class="header" href="#usage-patterns">Usage Patterns</a></h2>
<p>This section describes common deployment scenarios and
the recommended API combinations for each.</p>
<h3 id="stateful-with-changing-root"><a class="header" href="#stateful-with-changing-root">Stateful with Changing Root</a></h3>
<p>Applies when membership changes over time with members joining and slashing continuously.</p>
<p>Applications MUST maintain a sliding window of recent roots externally.
When members are added or removed via <code>set_leaf</code>, <code>delete_leaf</code>, or <code>atomic_operation</code>,
capture the new root using <code>get_root</code> and append it to the history buffer.
Verify incoming proofs using <code>verify_with_roots</code> with the root history buffer,
accepting proofs valid against any recent root.</p>
<p>The window size depends on network propagation delays and epoch duration.</p>
<h3 id="stateful-with-fixed-root"><a class="header" href="#stateful-with-fixed-root">Stateful with Fixed Root</a></h3>
<p>Applies when membership is established once and remains static during an operation period.</p>
<p>Initialize the tree using <code>init_tree_with_leaves</code> with the complete membership set.
No root history is required.
Verify proofs using <code>verify_rln_proof</code> which checks against the internal tree root directly.</p>
<h3 id="stateless"><a class="header" href="#stateless">Stateless</a></h3>
<p>Applies when membership state is managed externally,
such as by a smart contract or relay network.</p>
<p>Enable the <code>stateless</code> feature flag.
Obtain Merkle proofs and valid roots from the external source.
Pass externally provided <code>path_elements</code> and <code>identity_path_index</code> to <code>RLNWitnessInput::new</code>.
Verify using <code>verify_with_roots</code> with externally provided roots.</p>
<h3 id="wasm-browser-integration"><a class="header" href="#wasm-browser-integration">WASM Browser Integration</a></h3>
<p>WASM environments require external witness calculation.
Use <code>WasmRLNWitnessInput::toBigIntJson()</code> to export the witness for
JavaScript witness calculators,
then pass the result to <code>generateRLNProofWithWitness</code>.</p>
<p>When <code>parallel</code> feature is enabled,
call <code>initThreadPool()</code> before proof operations.
This requires COOP/COEP headers for SharedArrayBuffer support.</p>
<h4 id="epoch-and-rate-limit-configuration"><a class="header" href="#epoch-and-rate-limit-configuration">Epoch and Rate Limit Configuration</a></h4>
<p>The external nullifier is computed as <code>poseidon_hash([epoch, rln_identifier])</code>.
The <code>rln_identifier</code> is a field element that uniquely identifies your application (e.g., a hash of your app name).</p>
<p>All values that will be hashed MUST be represented as field elements.
For converting arbitrary data to field elements,
use <code>hash_to_field_le</code> or <code>hash_to_field_be</code> functions which internally use Poseidon hash.</p>
<p>Each application SHOULD use a unique <code>rln_identifier</code> to
prevent cross-application nullifier collisions.</p>
<p>The <code>user_message_limit</code> in the rate commitment determines messages allowed per epoch. The <code>message_id</code> must be less than <code>user_message_limit</code> and
should increment with each message.</p>
<p>Applications MUST persist the <code>message_id</code> counter to avoid violations after restarts.</p>
<h2 id="securityprivacy-considerations"><a class="header" href="#securityprivacy-considerations">Security/Privacy Considerations</a></h2>
<p>The security of Zerokit depends on the correct implementation of the RLN-V2 protocol
and the underlying zero-knowledge proof system.
Applications MUST ensure that:</p>
<ul>
<li>Identity secrets are kept confidential and never transmitted or logged</li>
<li>The <code>message_id</code> counter is properly persisted to prevent accidental rate limit violations</li>
<li>External nullifiers are constructed correctly to prevent cross-application attacks</li>
<li>Merkle tree roots are validated when using stateless mode</li>
<li>Circuit parameters (zkey and graph data) are obtained from trusted sources</li>
</ul>
<p>When using the <code>parallel</code> feature in WASM,
applications MUST serve content with appropriate COOP/COEP headers to
enable SharedArrayBuffer support securely.</p>
<p>The slashing mechanism exposes identity secrets when rate limits are violated.
Applications SHOULD educate users about this risk and
implement safeguards to prevent accidental violations.</p>
<h2 id="references"><a class="header" href="#references">References</a></h2>
<h3 id="normative"><a class="header" href="#normative">Normative</a></h3>
<ul>
<li><a href="32/rln-v1.html">RLN-V1 Specification</a> - Rate Limit Nullifier V1 protocol</li>
</ul>
<h3 id="informative"><a class="header" href="#informative">Informative</a></h3>
<ul>
<li><a href="https://github.com/vacp2p/zerokit">Zerokit GitHub Repository</a> - Reference implementation</li>
<li><a href="rln-v2.html">RLN-V2 Specification</a> - Rate Limit Nullifier V2 protocol</li>
<li><a href="https://sled.rs">Sled Database</a> - Embedded database for persistent Merkle tree storage</li>
<li><a href="https://github.com/vacp2p/zerokit/blob/master/rln-wasm/resources/witness_calculator.js">Witness Calculator</a> - JavaScript witness calculator for WASM environments</li>
</ul>
<h2 id="copyright"><a class="header" href="#copyright">Copyright</a></h2>
<p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../ift-ts/raw/rln-v2.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../ift-ts/raw/sds.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../ift-ts/raw/rln-v2.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../ift-ts/raw/sds.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../scripts/rfc-index.js"></script>


    </div>
    </body>
</html>
