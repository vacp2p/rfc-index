<!DOCTYPE HTML>
<html lang="en" class="ayu" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>10/Waku2 - Vac RFC</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../../../favicon.svg">
        <link rel="shortcut icon" href="../../../../favicon.png">
        <link rel="stylesheet" href="../../../../css/variables.css">
        <link rel="stylesheet" href="../../../../css/general.css">
        <link rel="stylesheet" href="../../../../css/chrome.css">
        <link rel="stylesheet" href="../../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../../highlight.css">
        <link rel="stylesheet" href="../../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../../../custom.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('ayu')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../../../index.html">Introduction</a></li><li class="chapter-item expanded "><a href="../../../../vac/index.html"><strong aria-hidden="true">1.</strong> Vac</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../vac/1/coss.html"><strong aria-hidden="true">1.1.</strong> 1/COSS</a></li><li class="chapter-item expanded "><a href="../../../../vac/2/mvds.html"><strong aria-hidden="true">1.2.</strong> 2/MVDS</a></li><li class="chapter-item expanded "><a href="../../../../vac/3/remote-log.html"><strong aria-hidden="true">1.3.</strong> 3/Remote Log</a></li><li class="chapter-item expanded "><a href="../../../../vac/4/mvds-meta.html"><strong aria-hidden="true">1.4.</strong> 4/MVDS Meta</a></li><li class="chapter-item expanded "><a href="../../../../vac/25/libp2p-dns-discovery.html"><strong aria-hidden="true">1.5.</strong> 25/Libp2p DNS Discovery</a></li><li class="chapter-item expanded "><a href="../../../../vac/32/rln-v1.html"><strong aria-hidden="true">1.6.</strong> 32/RLN-V1</a></li><li class="chapter-item expanded "><a href="../../../../vac/raw/index.html"><strong aria-hidden="true">1.7.</strong> Raw</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../vac/raw/consensus-hashgraphlike.html"><strong aria-hidden="true">1.7.1.</strong> Consensus Hashgraphlike</a></li><li class="chapter-item expanded "><a href="../../../../vac/raw/decentralized-messaging-ethereum.html"><strong aria-hidden="true">1.7.2.</strong> Decentralized Messaging Ethereum</a></li><li class="chapter-item expanded "><a href="../../../../vac/raw/eth-mls-offchain.html"><strong aria-hidden="true">1.7.3.</strong> ETH MLS Offchain</a></li><li class="chapter-item expanded "><a href="../../../../vac/raw/eth-mls-onchain.html"><strong aria-hidden="true">1.7.4.</strong> ETH MLS Onchain</a></li><li class="chapter-item expanded "><a href="../../../../vac/raw/deleted/eth-secpm.html"><strong aria-hidden="true">1.7.5.</strong> ETH SecPM</a></li><li class="chapter-item expanded "><a href="../../../../vac/raw/gossipsub-tor-push.html"><strong aria-hidden="true">1.7.6.</strong> Gossipsub Tor Push</a></li><li class="chapter-item expanded "><a href="../../../../vac/raw/logos-capability-discovery.html"><strong aria-hidden="true">1.7.7.</strong> Logos Capability Discovery</a></li><li class="chapter-item expanded "><a href="../../../../vac/raw/mix.html"><strong aria-hidden="true">1.7.8.</strong> Mix</a></li><li class="chapter-item expanded "><a href="../../../../vac/raw/noise-x3dh-double-ratchet.html"><strong aria-hidden="true">1.7.9.</strong> Noise X3DH Double Ratchet</a></li><li class="chapter-item expanded "><a href="../../../../vac/raw/rln-interep-spec.html"><strong aria-hidden="true">1.7.10.</strong> RLN Interep Spec</a></li><li class="chapter-item expanded "><a href="../../../../vac/raw/rln-stealth-commitments.html"><strong aria-hidden="true">1.7.11.</strong> RLN Stealth Commitments</a></li><li class="chapter-item expanded "><a href="../../../../vac/raw/rln-v2.html"><strong aria-hidden="true">1.7.12.</strong> RLN-V2</a></li><li class="chapter-item expanded "><a href="../../../../vac/raw/sds.html"><strong aria-hidden="true">1.7.13.</strong> SDS</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../vac/template.html"><strong aria-hidden="true">1.8.</strong> Template</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../waku/index.html"><strong aria-hidden="true">2.</strong> Waku</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../waku/standards/core/index.html"><strong aria-hidden="true">2.1.</strong> Standards - Core</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../waku/standards/core/10/waku2.html" class="active"><strong aria-hidden="true">2.1.1.</strong> 10/Waku2</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/core/11/relay.html"><strong aria-hidden="true">2.1.2.</strong> 11/Relay</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/core/12/filter.html"><strong aria-hidden="true">2.1.3.</strong> 12/Filter</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/core/13/store.html"><strong aria-hidden="true">2.1.4.</strong> 13/Store</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/core/14/message.html"><strong aria-hidden="true">2.1.5.</strong> 14/Message</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/core/15/bridge.html"><strong aria-hidden="true">2.1.6.</strong> 15/Bridge</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/core/17/rln-relay.html"><strong aria-hidden="true">2.1.7.</strong> 17/RLN Relay</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/core/19/lightpush.html"><strong aria-hidden="true">2.1.8.</strong> 19/Lightpush</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/core/31/enr.html"><strong aria-hidden="true">2.1.9.</strong> 31/ENR</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/core/33/discv5.html"><strong aria-hidden="true">2.1.10.</strong> 33/Discv5</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/core/34/peer-exchange.html"><strong aria-hidden="true">2.1.11.</strong> 34/Peer Exchange</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/core/36/bindings-api.html"><strong aria-hidden="true">2.1.12.</strong> 36/Bindings API</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/core/64/network.html"><strong aria-hidden="true">2.1.13.</strong> 64/Network</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/core/66/metadata.html"><strong aria-hidden="true">2.1.14.</strong> 66/Metadata</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../waku/standards/application/index.html"><strong aria-hidden="true">2.2.</strong> Standards - Application</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../waku/standards/application/20/toy-eth-pm.html"><strong aria-hidden="true">2.2.1.</strong> 20/Toy ETH PM</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/application/26/payload.html"><strong aria-hidden="true">2.2.2.</strong> 26/Payload</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/application/53/x3dh.html"><strong aria-hidden="true">2.2.3.</strong> 53/X3DH</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/application/54/x3dh-sessions.html"><strong aria-hidden="true">2.2.4.</strong> 54/X3DH Sessions</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../waku/standards/legacy/index.html"><strong aria-hidden="true">2.3.</strong> Standards - Legacy</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../waku/standards/legacy/6/waku1.html"><strong aria-hidden="true">2.3.1.</strong> 6/Waku1</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/legacy/7/data.html"><strong aria-hidden="true">2.3.2.</strong> 7/Data</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/legacy/8/mail.html"><strong aria-hidden="true">2.3.3.</strong> 8/Mail</a></li><li class="chapter-item expanded "><a href="../../../../waku/standards/legacy/9/rpc.html"><strong aria-hidden="true">2.3.4.</strong> 9/RPC</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../waku/informational/index.html"><strong aria-hidden="true">2.4.</strong> Informational</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../waku/informational/22/toy-chat.html"><strong aria-hidden="true">2.4.1.</strong> 22/Toy Chat</a></li><li class="chapter-item expanded "><a href="../../../../waku/informational/23/topics.html"><strong aria-hidden="true">2.4.2.</strong> 23/Topics</a></li><li class="chapter-item expanded "><a href="../../../../waku/informational/27/peers.html"><strong aria-hidden="true">2.4.3.</strong> 27/Peers</a></li><li class="chapter-item expanded "><a href="../../../../waku/informational/29/config.html"><strong aria-hidden="true">2.4.4.</strong> 29/Config</a></li><li class="chapter-item expanded "><a href="../../../../waku/informational/30/adaptive-nodes.html"><strong aria-hidden="true">2.4.5.</strong> 30/Adaptive Nodes</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../waku/deprecated/index.html"><strong aria-hidden="true">2.5.</strong> Deprecated</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../waku/deprecated/5/waku0.html"><strong aria-hidden="true">2.5.1.</strong> 5/Waku0</a></li><li class="chapter-item expanded "><a href="../../../../waku/deprecated/16/rpc.html"><strong aria-hidden="true">2.5.2.</strong> 16/RPC</a></li><li class="chapter-item expanded "><a href="../../../../waku/deprecated/18/swap.html"><strong aria-hidden="true">2.5.3.</strong> 18/Swap</a></li><li class="chapter-item expanded "><a href="../../../../waku/deprecated/fault-tolerant-store.html"><strong aria-hidden="true">2.5.4.</strong> Fault Tolerant Store</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../nomos/index.html"><strong aria-hidden="true">3.</strong> Nomos</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../nomos/raw/index.html"><strong aria-hidden="true">3.1.</strong> Raw</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../nomos/raw/nomosda-encoding.html"><strong aria-hidden="true">3.1.1.</strong> NomosDA Encoding</a></li><li class="chapter-item expanded "><a href="../../../../nomos/raw/nomosda-network.html"><strong aria-hidden="true">3.1.2.</strong> NomosDA Network</a></li><li class="chapter-item expanded "><a href="../../../../nomos/raw/p2p-hardware-requirements.html"><strong aria-hidden="true">3.1.3.</strong> P2P Hardware Requirements</a></li><li class="chapter-item expanded "><a href="../../../../nomos/raw/p2p-nat-solution.html"><strong aria-hidden="true">3.1.4.</strong> P2P NAT Solution</a></li><li class="chapter-item expanded "><a href="../../../../nomos/raw/p2p-network-bootstrapping.html"><strong aria-hidden="true">3.1.5.</strong> P2P Network Bootstrapping</a></li><li class="chapter-item expanded "><a href="../../../../nomos/raw/p2p-network.html"><strong aria-hidden="true">3.1.6.</strong> P2P Network</a></li><li class="chapter-item expanded "><a href="../../../../nomos/raw/sdp.html"><strong aria-hidden="true">3.1.7.</strong> SDP</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../nomos/deprecated/index.html"><strong aria-hidden="true">3.2.</strong> Deprecated</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../nomos/deprecated/claro.html"><strong aria-hidden="true">3.2.1.</strong> Claro</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../codex/index.html"><strong aria-hidden="true">4.</strong> Codex</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../codex/raw/index.html"><strong aria-hidden="true">4.1.</strong> Raw</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../codex/raw/codex-block-exchange.html"><strong aria-hidden="true">4.1.1.</strong> Block Exchange</a></li><li class="chapter-item expanded "><a href="../../../../codex/raw/codex-marketplace.html"><strong aria-hidden="true">4.1.2.</strong> Marketplace</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../status/index.html"><strong aria-hidden="true">5.</strong> Status</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../status/24/curation.html"><strong aria-hidden="true">5.1.</strong> 24/Curation</a></li><li class="chapter-item expanded "><a href="../../../../status/28/featuring.html"><strong aria-hidden="true">5.2.</strong> 28/Featuring</a></li><li class="chapter-item expanded "><a href="../../../../status/55/1to1-chat.html"><strong aria-hidden="true">5.3.</strong> 55/1-to-1 Chat</a></li><li class="chapter-item expanded "><a href="../../../../status/56/communities.html"><strong aria-hidden="true">5.4.</strong> 56/Communities</a></li><li class="chapter-item expanded "><a href="../../../../status/61/community-history-service.html"><strong aria-hidden="true">5.5.</strong> 61/Community History Service</a></li><li class="chapter-item expanded "><a href="../../../../status/62/payloads.html"><strong aria-hidden="true">5.6.</strong> 62/Payloads</a></li><li class="chapter-item expanded "><a href="../../../../status/63/keycard-usage.html"><strong aria-hidden="true">5.7.</strong> 63/Keycard Usage</a></li><li class="chapter-item expanded "><a href="../../../../status/65/account-address.html"><strong aria-hidden="true">5.8.</strong> 65/Account Address</a></li><li class="chapter-item expanded "><a href="../../../../status/71/push-notification-server.html"><strong aria-hidden="true">5.9.</strong> 71/Push Notification Server</a></li><li class="chapter-item expanded "><a href="../../../../status/raw/index.html"><strong aria-hidden="true">5.10.</strong> Raw</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../status/raw/simple-scaling.html"><strong aria-hidden="true">5.10.1.</strong> Simple Scaling</a></li><li class="chapter-item expanded "><a href="../../../../status/raw/status-app-protocols.html"><strong aria-hidden="true">5.10.2.</strong> Status App Protocols</a></li><li class="chapter-item expanded "><a href="../../../../status/raw/status-mvds.html"><strong aria-hidden="true">5.10.3.</strong> Status MVDS</a></li><li class="chapter-item expanded "><a href="../../../../status/raw/url-data.html"><strong aria-hidden="true">5.10.4.</strong> URL Data</a></li><li class="chapter-item expanded "><a href="../../../../status/raw/url-scheme.html"><strong aria-hidden="true">5.10.5.</strong> URL Scheme</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../status/deprecated/index.html"><strong aria-hidden="true">5.11.</strong> Deprecated</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../status/deprecated/3rd-party.html"><strong aria-hidden="true">5.11.1.</strong> 3rd Party</a></li><li class="chapter-item expanded "><a href="../../../../status/deprecated/account.html"><strong aria-hidden="true">5.11.2.</strong> Account</a></li><li class="chapter-item expanded "><a href="../../../../status/deprecated/client.html"><strong aria-hidden="true">5.11.3.</strong> Client</a></li><li class="chapter-item expanded "><a href="../../../../status/deprecated/dapp-browser-API-usage.html"><strong aria-hidden="true">5.11.4.</strong> Dapp Browser API Usage</a></li><li class="chapter-item expanded "><a href="../../../../status/deprecated/eips.html"><strong aria-hidden="true">5.11.5.</strong> EIPs</a></li><li class="chapter-item expanded "><a href="../../../../status/deprecated/ethereum-usage.html"><strong aria-hidden="true">5.11.6.</strong> Ethereum Usage</a></li><li class="chapter-item expanded "><a href="../../../../status/deprecated/group-chat.html"><strong aria-hidden="true">5.11.7.</strong> Group Chat</a></li><li class="chapter-item expanded "><a href="../../../../status/deprecated/IPFS-gateway-for-sticker-Pack.html"><strong aria-hidden="true">5.11.8.</strong> IPFS Gateway for Sticker Pack</a></li><li class="chapter-item expanded "><a href="../../../../status/deprecated/keycard-usage-for-wallet-and-chat-keys.html"><strong aria-hidden="true">5.11.9.</strong> Keycard Usage for Wallet and Chat Keys</a></li><li class="chapter-item expanded "><a href="../../../../status/deprecated/notifications.html"><strong aria-hidden="true">5.11.10.</strong> Notifications</a></li><li class="chapter-item expanded "><a href="../../../../status/deprecated/payloads.html"><strong aria-hidden="true">5.11.11.</strong> Payloads</a></li><li class="chapter-item expanded "><a href="../../../../status/deprecated/push-notification-server.html"><strong aria-hidden="true">5.11.12.</strong> Push Notification Server</a></li><li class="chapter-item expanded "><a href="../../../../status/deprecated/secure-transport.html"><strong aria-hidden="true">5.11.13.</strong> Secure Transport</a></li><li class="chapter-item expanded "><a href="../../../../status/deprecated/waku-mailserver.html"><strong aria-hidden="true">5.11.14.</strong> Waku Mailserver</a></li><li class="chapter-item expanded "><a href="../../../../status/deprecated/waku-usage.html"><strong aria-hidden="true">5.11.15.</strong> Waku Usage</a></li><li class="chapter-item expanded "><a href="../../../../status/deprecated/whisper-mailserver.html"><strong aria-hidden="true">5.11.16.</strong> Whisper Mailserver</a></li><li class="chapter-item expanded "><a href="../../../../status/deprecated/whisper-usage.html"><strong aria-hidden="true">5.11.17.</strong> Whisper Usage</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Vac RFC</h1>

                    <div class="right-buttons">
                        <a href="../../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/vacp2p/rfc-index" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="10waku2"><a class="header" href="#10waku2">10/WAKU2</a></h1>
<div class="table-wrapper"><table><thead><tr><th>Field</th><th>Value</th></tr></thead><tbody>
<tr><td>Name</td><td>Waku v2</td></tr>
<tr><td>Slug</td><td>10</td></tr>
<tr><td>Status</td><td>draft</td></tr>
<tr><td>Editor</td><td>Hanno Cornelius <a href="mailto:hanno@status.im">hanno@status.im</a></td></tr>
<tr><td>Contributors</td><td>Sanaz Taheri <a href="mailto:sanaz@status.im">sanaz@status.im</a>, Hanno Cornelius <a href="mailto:hanno@status.im">hanno@status.im</a>, Reeshav Khan <a href="mailto:reeshav@status.im">reeshav@status.im</a>, Daniel Kaiser <a href="mailto:danielkaiser@status.im">danielkaiser@status.im</a>, Oskar Thorén <a href="mailto:oskarth@titanproxy.com">oskarth@titanproxy.com</a></td></tr>
</tbody></table>
</div><!-- timeline:start -->
<h2 id="timeline"><a class="header" href="#timeline">Timeline</a></h2>
<ul>
<li><strong>2025-12-22</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/0f1855edcf68ef982c4ce478b67d660809aa9830/docs/waku/standards/core/10/waku2.md"><code>0f1855e</code></a> — Chore/fix headers (#239)</li>
<li><strong>2025-12-22</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/b1a578393edf8487ccc97a5f25b25af9bf41efb3/docs/waku/standards/core/10/waku2.md"><code>b1a5783</code></a> — Chore/mdbook updates (#237)</li>
<li><strong>2025-12-18</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/d03e699084774ebecef9c6d4662498907c5e2080/docs/waku/standards/core/10/waku2.md"><code>d03e699</code></a> — ci: add mdBook configuration (#233)</li>
<li><strong>2025-04-15</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/34aa3f3647cd5f0ae6a9af7fad47c3c8ee32c866/waku/standards/core/10/waku2.md"><code>34aa3f3</code></a> — Fix links 10/WAKU2 (#153)</li>
<li><strong>2025-04-09</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/cafa04fb93c461034e1754cf750409a6236cf6ee/waku/standards/core/10/waku2.md"><code>cafa04f</code></a> — 10/WAKU2: Update (#125)</li>
<li><strong>2024-11-20</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/ff87c84dc71d4f933bab188993914069fea12baa/waku/standards/core/10/waku2.md"><code>ff87c84</code></a> — Update Waku Links (#104)</li>
<li><strong>2024-09-13</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/3ab314d87d4525ff1296bf3d9ec634d570777b91/waku/standards/core/10/waku2.md"><code>3ab314d</code></a> — Fix Files for Linting (#94)</li>
<li><strong>2024-03-21</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/2eaa7949c4abe7d14e2b9560e8c045bf2e937c9a/waku/standards/core/10/waku2.md"><code>2eaa794</code></a> — Broken Links + Change Editors (#26)</li>
<li><strong>2024-02-01</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/8e14d584bf90f59aab790c9b8e62dd6adf5da100/waku/standards/core/10/waku2.md"><code>8e14d58</code></a> — Update waku2.md</li>
<li><strong>2024-02-01</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/6cf68fd03e35f5889a827d0e7d053879e2162a4e/waku/standards/core/10/waku2.md"><code>6cf68fd</code></a> — Update waku2.md</li>
<li><strong>2024-02-01</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/6734b1690817d1647feeccc07f28c13fc1c3b789/waku/standards/core/10/waku2.md"><code>6734b16</code></a> — Update waku2.md</li>
<li><strong>2024-01-31</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/356649a5b690dd56f7de42961eeeeb676dd71b88/waku/standards/core/10/waku2.md"><code>356649a</code></a> — Update and rename WAKU2.md to waku2.md</li>
<li><strong>2024-01-27</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/550238ca71eb03506d400db579d8fdbab1acd6ad/waku/standards/core/10/WAKU2.md"><code>550238c</code></a> — Rename README.md to WAKU2.md</li>
<li><strong>2024-01-27</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/eef961bfe3b1cf6aab66df5450555afd1d3543cb/waku/standards/core/10-WAKU2/README.md"><code>eef961b</code></a> — remove rfs folder</li>
<li><strong>2024-01-26</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/d6651b7f2a72974685871b3c25c7514dd5a4e679/waku/rfcs/standards/core/10-WAKU2/README.md"><code>d6651b7</code></a> — Update README.md</li>
<li><strong>2024-01-25</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/6e98666f71f01fd5fa348ba71d8d55a265891a80/waku/rfcs/standards/core/10-WAKU2/README.md"><code>6e98666</code></a> — Rename README.md to README.md</li>
<li><strong>2024-01-25</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/9b740d887522349f8d9c80c580d3777d7f6f63af/waku/specs/standards/core/10-WAKU2/README.md"><code>9b740d8</code></a> — Rename waku/10/README.md to waku/specs/standards/core/10-WAKU2/README.md</li>
<li><strong>2024-01-24</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/330c35b56eecf3876c8246fbddb9e40b5211b566/waku/10/README.md"><code>330c35b</code></a> — Create README.md</li>
</ul>
<!-- timeline:end -->
<h2 id="abstract"><a class="header" href="#abstract">Abstract</a></h2>
<p>Waku is a family of modular peer-to-peer protocols for secure communication.
The protocols are designed to be secure, privacy-preserving, censorship-resistant
and being able to run in resource-restricted environments.
At a high level, it implements Pub/Sub over <a href="https://github.com/libp2p/specs">libp2p</a>
and adds a set of capabilities to it.
These capabilities are things such as:
(i) retrieving historical messages for mostly-offline devices
(ii) adaptive nodes, allowing for heterogeneous nodes to contribute to the network
(iii) preserving bandwidth usage for resource-restriced devices</p>
<p>This makes Waku ideal for running a p2p protocol on mobile devices and
other similar restricted environments.</p>
<p>Historically, it has its roots in <a href="/waku/standards/legacy/6/waku1.html">6/WAKU1</a>,
which stems from <a href="https://eips.ethereum.org/EIPS/eip-627">Whisper</a>,
originally part of the Ethereum stack.
However, Waku acts more as a thin wrapper for Pub/Sub and has a different API.
It is implemented in an iterative manner where initial focus
is on porting essential functionality to libp2p.
See <a href="https://vac.dev/waku-v2-plan">rough road map (2020)</a> for more historical context.</p>
<h2 id="motivation-and-goals"><a class="header" href="#motivation-and-goals">Motivation and Goals</a></h2>
<p>Waku, as a family of protocols, is designed to have a set of properties
that are useful for many applications:</p>
<p>1.<strong>Useful for generalized messaging.</strong></p>
<p>Many applications require some form of messaging protocol to communicate
between different subsystems or different nodes.
This messaging can be human-to-human, machine-to-machine or a mix.
Waku is designed to work for all these scenarios.</p>
<p>2.<strong>Peer-to-peer.</strong></p>
<p>Applications sometimes have requirements that make them suitable
for peer-to-peer solutions:</p>
<ul>
<li>Censorship-resistant with no single point of failure</li>
<li>Adaptive and scalable network</li>
<li>Shared infrastructure</li>
</ul>
<p>3.<strong>Runs anywhere.</strong></p>
<p>Applications often run in restricted environments,
where resources or the environment is restricted in some fashion.
For example:</p>
<ul>
<li>Limited bandwidth, CPU, memory, disk, battery, etc.</li>
<li>Not being publicly connectable</li>
<li>Only being intermittently connected; mostly-offline</li>
</ul>
<p>4.<strong>Privacy-preserving.</strong></p>
<p>Applications often have a desire for some privacy guarantees, such as:</p>
<ul>
<li>Pseudonymity and not being tied to any personally identifiable information (PII)</li>
<li>Metadata protection in transit</li>
<li>Various forms of unlinkability, etc.</li>
</ul>
<p>5.<strong>Modular design.</strong></p>
<p>Applications often have different trade-offs when it comes to what properties they
and their users value.
Waku is designed in a modular fashion where an application protocol or
node can choose what protocols they run.
We call this concept <em>adaptive nodes</em>.</p>
<p>For example:</p>
<ul>
<li>Resource usage vs metadata protection</li>
<li>Providing useful services to the network vs mostly using it</li>
<li>Stronger guarantees for spam protection vs economic registration cost</li>
</ul>
<p>For more on the concept of adaptive nodes and what this means in practice,
please see the <a href="/waku/informational/30/adaptive-nodes.html">30/ADAPTIVE-NODES</a> spec.</p>
<h2 id="specification"><a class="header" href="#specification">Specification</a></h2>
<p>The keywords “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”,
“SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and
“OPTIONAL” in this document are to be interpreted as described in <a href="https://www.ietf.org/rfc/rfc2119.txt">2119</a>.</p>
<h3 id="network-interaction-domains"><a class="header" href="#network-interaction-domains">Network Interaction Domains</a></h3>
<p>While Waku is best thought of as a single cohesive thing,
there are three network interaction domains:</p>
<p>(a) gossip domain
(b) discovery domain
(c) request/response domain</p>
<h4 id="protocols-and-identifiers"><a class="header" href="#protocols-and-identifiers">Protocols and Identifiers</a></h4>
<p>Since Waku is built on top of libp2p, many protocols have a libp2p protocol identifier.
The current main <a href="https://docs.libp2p.io/concepts/protocols/">protocol identifiers</a>
are:</p>
<ol>
<li><code>/vac/waku/relay/2.0.0</code></li>
<li><code>/vac/waku/store-query/3.0.0</code></li>
<li><code>/vac/waku/filter/2.0.0-beta1</code></li>
<li><code>/vac/waku/lightpush/2.0.0-beta1</code></li>
</ol>
<p>This is in addition to protocols that specify messages, payloads, and
recommended usages.
Since these aren't negotiated libp2p protocols,
they are referred to by their RFC ID.
For example:</p>
<ul>
<li><a href="/waku/standards/core/14/message.html">14/WAKU2-MESSAGE</a> and
<a href="/waku/standards/application/26/payload.html">26/WAKU-PAYLOAD</a> for message payloads</li>
<li><a href="/waku/informational/23/topics.html">23/WAKU2-TOPICS</a> and
<a href="/waku/informational/27/peers.html">27/WAKU2-PEERS</a> for recommendations around usage</li>
</ul>
<p>There are also more experimental libp2p protocols such as:</p>
<ol>
<li><code>/vac/waku/waku-rln-relay/2.0.0-alpha1</code></li>
<li><code>/vac/waku/peer-exchange/2.0.0-alpha1</code></li>
</ol>
<p>The semantics of these protocols are referred to by RFC ID <a href="/waku/standards/core/17/rln-relay.html">17/WAKU2-RLN-RELAY</a> and <a href="/waku/standards/core/34/peer-exchange.html">34/WAKU2-PEER-EXCHANGE</a>.</p>
<h4 id="use-of-libp2p-and-protobuf"><a class="header" href="#use-of-libp2p-and-protobuf">Use of libp2p and Protobuf</a></h4>
<p>Unless otherwise specified,
all protocols are implemented over libp2p and use Protobuf by default.
Since messages are exchanged over a <a href="https://docs.libp2p.io/concepts/protocols/">bi-directional binary stream</a>,
as a convention,
libp2p protocols prefix binary message payloads with
the length of the message in bytes.
This length integer is encoded as a <a href="https://developers.google.com/protocol-buffers/docs/encoding#varints">protobuf varint</a>.</p>
<h4 id="gossip-domain"><a class="header" href="#gossip-domain">Gossip Domain</a></h4>
<p>Waku is using gossiping to disseminate messages throughout the network.</p>
<p><strong>Protocol identifier</strong>: <code>/vac/waku/relay/2.0.0</code></p>
<p>See <a href="/waku/standards/core/11/relay.html">11/WAKU2-RELAY</a> specification for more details.</p>
<p>For an experimental privacy-preserving economic spam protection mechanism,
see <a href="/waku/standards/core/17/rln-relay.html">17/WAKU2-RLN-RELAY</a>.</p>
<p>See <a href="/waku/informational/23/topics.html">23/WAKU2-TOPICS</a>
for more information about the recommended topic usage.</p>
<h4 id="direct-use-of-libp2p-protocols"><a class="header" href="#direct-use-of-libp2p-protocols">Direct use of libp2p protocols</a></h4>
<p>In addition to <code>/vac/waku/*</code> protocols,
Waku MAY directly use the following libp2p protocols:</p>
<ul>
<li><a href="https://docs.libp2p.io/concepts/protocols/#ping">libp2p ping protocol</a>
with protocol id</li>
</ul>
<pre><code class="language-text">/ipfs/ping/1.0.0
</code></pre>
<p>for liveness checks between peers, or
to keep peer-to-peer connections alive.</p>
<ul>
<li><a href="https://docs.libp2p.io/concepts/protocols/#identify">libp2p identity and identity/push</a>
with protocol IDs</li>
</ul>
<pre><code class="language-text">/ipfs/id/1.0.0
</code></pre>
<p>and</p>
<pre><code class="language-text">/ipfs/id/push/1.0.0
</code></pre>
<p>respectively, as basic means for capability discovery.
These protocols are anyway used by the libp2p connection
establishment layer Waku is built on.
We plan to introduce a new Vac capability discovery protocol
with better anonymity properties and more functionality.</p>
<h4 id="transports"><a class="header" href="#transports">Transports</a></h4>
<p>Waku is built in top of libp2p, and like libp2p it strives to be transport agnostic.
We define a set of recommended transports in order to achieve a baseline of
interoperability between clients.
This section describes these recommended transports.</p>
<p>Waku client implementations SHOULD support the TCP transport.
Where TCP is supported it MUST be enabled for both dialing and listening,
even if other transports are available.</p>
<p>Waku nodes running in environments that do not allow the use of TCP directly,
MAY use other transports.</p>
<p>A Waku node SHOULD support secure websockets for bidirectional communication streams,
for example in a web browser context.</p>
<p>A node MAY support unsecure websockets if required by the application or
running environment.</p>
<h3 id="discovery-domain"><a class="header" href="#discovery-domain">Discovery Domain</a></h3>
<h4 id="discovery-methods"><a class="header" href="#discovery-methods">Discovery Methods</a></h4>
<p>Waku can retrieve a list of nodes to connect to using DNS-based discovery
as per <a href="https://eips.ethereum.org/EIPS/eip-1459">EIP-1459</a>.
While this is a useful way of bootstrapping connection to a set of peers,
it MAY be used in conjunction with an <a href="https://docs.libp2p.io/concepts/publish-subscribe/#discovery">ambient peer discovery</a>
procedure to find other nodes to connect to,
such as <a href="https://github.com/ethereum/devp2p/blob/8fd5f7e1c1ec496a9d8dc1640a8548b8a8b5986b/discv5/discv5.md">Node Discovery v5</a>.
It is possible to bypass the discovery domain by specifying static nodes.</p>
<h4 id="use-of-enr"><a class="header" href="#use-of-enr">Use of ENR</a></h4>
<p><a href="https://github.com/waku-org/specs/blob/master/standards/core/enr.md">WAKU2-ENR</a>
describes the usage of <a href="https://eips.ethereum.org/EIPS/eip-778">EIP-778 ENR (Ethereum Node Records)</a>
for Waku discovery purposes.
It introduces two new ENR fields, <code>multiaddrs</code> and
<code>waku2</code>, that a Waku node MAY use for discovery purposes.
These fields MUST be used under certain conditions, as set out in the specification.
Both EIP-1459 DNS-based discovery and Node Discovery v5 operate on ENR,
and it's reasonable to expect even wider utility for ENR in Waku networks in the future.</p>
<h3 id="requestresponse-domain"><a class="header" href="#requestresponse-domain">Request/Response Domain</a></h3>
<p>In addition to the Gossip domain,
Waku provides a set of request/response protocols.
They are primarily used in order to get Waku to run in resource restricted environments,
such as low bandwidth or being mostly offline.</p>
<h4 id="historical-message-support"><a class="header" href="#historical-message-support">Historical Message Support</a></h4>
<p><strong>Protocol identifier</strong>*: <code>/vac/waku/store-query/3.0.0</code></p>
<p>This is used to fetch historical messages for mostly offline devices.
See <a href="/waku/standards/core/13/store.html">13/WAKU2-STORE spec</a> specification for more details.</p>
<p>There is also an experimental fault-tolerant addition to the store protocol
that relaxes the high availability requirement.
See <a href="/waku/standards/application/21/fault-tolerant-store.html">21/WAKU2-FAULT-TOLERANT-STORE</a></p>
<h4 id="content-filtering"><a class="header" href="#content-filtering">Content Filtering</a></h4>
<p><strong>Protocol identifier</strong>*: <code>/vac/waku/filter/2.0.0-beta1</code></p>
<p>This is used to preserve more bandwidth when fetching a subset of messages.
See <a href="/waku/standards/core/12/filter.html">12/WAKU2-FILTER</a> specification for more details.</p>
<h4 id="lightpush"><a class="header" href="#lightpush">LightPush</a></h4>
<p><strong>Protocol identifier</strong>*: <code>/vac/waku/lightpush/2.0.0-beta1</code></p>
<p>This is used for nodes with short connection windows and
limited bandwidth to publish messages into the Waku network.
See <a href="/waku/standards/core/19/lightpush.html">19/WAKU2-LIGHTPUSH</a> specification for more details.</p>
<h4 id="other-protocols"><a class="header" href="#other-protocols">Other Protocols</a></h4>
<p>The above is a non-exhaustive list,
and due to the modular design of Waku,
there may be other protocols here that provide a useful service to the Waku network.</p>
<h3 id="overview-of-protocol-interaction"><a class="header" href="#overview-of-protocol-interaction">Overview of Protocol Interaction</a></h3>
<p>See the sequence diagram below for an overview of how different protocols interact.</p>
<p><img src="./images/overview.png" alt="Overview of how protocols interact in Waku." /></p>
<ol start="0">
<li>
<p>We have six nodes, A-F.
The protocols initially mounted are indicated as such.
The PubSub topics <code>pubtopic1</code> and
<code>pubtopic2</code> is used for routing and
indicates that it is subscribed to messages on that topic for relay,
see <a href="/waku/standards/core/11/relay.html">11/WAKU2-RELAY</a> for details.
Ditto for <a href="/waku/standards/core/13/store.html">13/WAKU2-STORE</a>
where it indicates that these messages are persisted on that node.</p>
</li>
<li>
<p>Node A creates a WakuMessage <code>msg1</code> with a ContentTopic <code>contentTopic1</code>.
See <a href="/waku/standards/core/14/message.html">14/WAKU2-MESSAGE</a> for more details.
If WakuMessage version is set to 1,
we use the <a href="/waku/standards/legacy/6/waku1.html">6/WAKU1</a> compatible <code>data</code> field with encryption.
See <a href="/waku/standards/legacy/7/data.html">7/WAKU-DATA</a> for more details.</p>
</li>
<li>
<p>Node F requests to get messages filtered by PubSub topic <code>pubtopic1</code> and
ContentTopic <code>contentTopic1</code>.
Node D subscribes F to this filter and
will in the future forward messages that match that filter.
See <a href="/waku/standards/core/12/filter.html">12/WAKU2-FILTER</a> for more details.</p>
</li>
<li>
<p>Node A publishes <code>msg1</code> on <code>pubtopic1</code> and
subscribes to that relay topic.
It then gets relayed further from B to D, but
not C since it doesn't subscribe to that topic.
See <a href="/waku/standards/core/11/relay.html">11/WAKU2-RELAY</a>.</p>
</li>
<li>
<p>Node D saves <code>msg1</code> for possible later retrieval by other nodes.
See <a href="/waku/standards/core/13/store.html">13/WAKU2-STORE</a>.</p>
</li>
<li>
<p>Node D also pushes <code>msg1</code> to F,
as it has previously subscribed F to this filter.
See <a href="/waku/standards/core/12/filter.html">12/WAKU2-FILTER</a>.</p>
</li>
<li>
<p>At a later time, Node E comes online.
It then requests messages matching <code>pubtopic1</code> and
<code>contentTopic1</code> from Node D.
Node D responds with messages meeting this (and possibly other) criteria.
See <a href="/waku/standards/core/13/store.html">13/WAKU2-STORE</a>.</p>
</li>
</ol>
<h2 id="appendix-a-upgradability-and-compatibility"><a class="header" href="#appendix-a-upgradability-and-compatibility">Appendix A: Upgradability and Compatibility</a></h2>
<h3 id="compatibility-with-waku-legacy"><a class="header" href="#compatibility-with-waku-legacy">Compatibility with Waku Legacy</a></h3>
<p><a href="/waku/standards/legacy/6/waku1.html">6/WAKU1</a> and Waku are different protocols all together.
They use a different transport protocol underneath;
<a href="/waku/standards/legacy/6/waku1.html">6/WAKU1</a> is devp2p RLPx based while Waku uses libp2p.
The protocols themselves also differ as does their data format.
Compatibility can be achieved only by using a bridge
that not only talks both devp2p RLPx and libp2p,
but that also transfers (partially) the content of a packet from one version
to the other.</p>
<p>See <a href="/waku/standards/core/15/bridge.html">15/WAKU-BRIDGE</a> for details on a bidirectional bridge mode.</p>
<h2 id="appendix-b-security"><a class="header" href="#appendix-b-security">Appendix B: Security</a></h2>
<p>Each protocol layer of Waku provides a distinct service and
is associated with a separate set of security features and concerns.
Therefore, the overall security of Waku
depends on how the different layers are utilized.
In this section,
we overview the security properties of Waku protocols
against a static adversarial model which is described below.
Note that a more detailed security analysis of each Waku protocol
is supplied in its respective specification as well.</p>
<h3 id="primary-adversarial-model"><a class="header" href="#primary-adversarial-model">Primary Adversarial Model</a></h3>
<p>In the primary adversarial model,
we consider adversary as a passive entity that attempts to collect information
from others to conduct an attack,
but it does so without violating protocol definitions and instructions.</p>
<p>The following are <strong>not</strong> considered as part of the adversarial model:</p>
<ul>
<li>An adversary with a global view of all the peers and their connections.</li>
<li>An adversary that can eavesdrop on communication links
between arbitrary pairs of peers
(unless the adversary is one end of the communication).
Specifically, the communication channels are assumed to be secure.</li>
</ul>
<h3 id="security-features"><a class="header" href="#security-features">Security Features</a></h3>
<h4 id="pseudonymity"><a class="header" href="#pseudonymity">Pseudonymity</a></h4>
<p>Waku by default guarantees pseudonymity for all of the protocol layers
since parties do not have to disclose their true identity
and instead they utilize libp2p <code>PeerID</code> as their identifiers.
While pseudonymity is an appealing security feature,
it does not guarantee full anonymity since the actions taken under the same pseudonym
i.e., <code>PeerID</code> can be linked together and
potentially result in the re-identification of the true actor.</p>
<h4 id="anonymity--unlinkability"><a class="header" href="#anonymity--unlinkability">Anonymity / Unlinkability</a></h4>
<p>At a high level,
anonymity is the inability of an adversary in linking an actor
to its data/performed action (the actor and action are context-dependent).
To be precise about linkability,
we use the term Personally Identifiable Information (PII)
to refer to any piece of data that could potentially
be used to uniquely identify a party.
For example, the signature verification key, and
the hash of one's static IP address are unique for each user and
hence count as PII.
Notice that users' actions can be traced through their PIIs
(e.g., signatures) and hence result in their re-identification risk.
As such, we seek anonymity by avoiding linkability between actions and
the actors / actors' PII. Concerning anonymity, Waku provides the following features:</p>
<p><strong>Publisher-Message Unlinkability</strong>:
This feature signifies the unlinkability of a publisher
to its published messages in the 11/WAKU2-RELAY protocol.
The <a href="/waku/standards/core/11/relay.html">Publisher-Message Unlinkability</a>
is enforced through the <code>StrictNoSign</code> policy due to which the data fields
of pubsub messages that count as PII for the publisher must be left unspecified.</p>
<p><strong>Subscriber-Topic Unlinkability</strong>:
This feature stands for the unlinkability of the subscriber
to its subscribed topics in the 11/WAKU2-RELAY protocol.
The <a href="/waku/standards/core/11/relay.html">Subscriber-Topic Unlinkability</a>
is achieved through the utilization of a single PubSub topic.
As such, subscribers are not re-identifiable from their subscribed topic IDs
as the entire network is linked to the same topic ID.
This level of unlinkability / anonymity is known as <a href="https://www.privitar.com/blog/k-anonymity-an-introduction/">k-anonymity</a>
where k is proportional to the system size (number of subscribers).
Note that there is no hard limit on the number of the pubsub topics, however,
the use of one topic is recommended for the sake of anonymity.</p>
<h4 id="spam-protection"><a class="header" href="#spam-protection">Spam protection</a></h4>
<p>This property indicates that no adversary can flood the system
(i.e., publishing a large number of messages in a short amount of time),
either accidentally or deliberately, with any kind of message
i.e. even if the message content is valid or useful.
Spam protection is partly provided in <code>11/WAKU2-RELAY</code>
through the <a href="https://github.com/libp2p/specs/blob/master/pubsub/gossipsub/gossipsub-v1.1.md#spam-protection-measures">scoring mechanism</a>
provided for by GossipSub v1.1.
At a high level,
peers utilize a scoring function to locally score the behavior
of their connections and remove peers with a low score.</p>
<h4 id="data-confidentiality-integrity-and-authenticity"><a class="header" href="#data-confidentiality-integrity-and-authenticity">Data confidentiality, Integrity, and Authenticity</a></h4>
<p>Confidentiality can be addressed through data encryption whereas integrity and
authenticity are achievable through digital signatures.
These features are provided for in <a href="/waku/standards/core/14/message.html">14/WAKU2-MESSAGE (version 1)</a>`
through payload encryption as well as encrypted signatures.</p>
<h3 id="security-considerations"><a class="header" href="#security-considerations">Security Considerations</a></h3>
<p>Lack of anonymity/unlinkability in the protocols involving direct connections
including <code>13/WAKU2-STORE</code> and <code>12/WAKU2-FILTER</code> protocols:</p>
<p>The anonymity/unlinkability is not guaranteed in the protocols like <code>13/WAKU2-STORE</code>
and <code>12/WAKU2-FILTER</code> where peers need to have direct connections
to benefit from the designated service.
This is because during the direct connections peers utilize <code>PeerID</code>
to identify each other,
therefore the service obtained in the protocol is linkable
to the beneficiary's <code>PeerID</code> (which counts as PII).
For <code>13/WAKU2-STORE</code>,
the queried node would be able to link the querying node's <code>PeerID</code>
to its queried topics.
Likewise, in the <code>12/WAKU2-FILTER</code>,
a full node can link the light node's <code>PeerID</code>s to its content filter.</p>
<!-- TODO: to inspect the nim-libp2p codebase and
figure out the exact use of PeerIDs in direct communication,
it might be the case that the requester does not have to disclose its PeerID-->
<!--TODO: might be good to add a figure visualizing the Waku protocol stack and
the security features of each layer-->
<h2 id="appendix-c-implementation-notes"><a class="header" href="#appendix-c-implementation-notes">Appendix C: Implementation Notes</a></h2>
<h3 id="implementation-matrix"><a class="header" href="#implementation-matrix">Implementation Matrix</a></h3>
<p>There are multiple implementations of Waku and its protocols:</p>
<ul>
<li><a href="https://github.com/status-im/nim-waku/">nim-waku (Nim)</a></li>
<li><a href="https://github.com/status-im/go-waku/">go-waku (Go)</a></li>
<li><a href="https://github.com/status-im/js-waku/">js-waku (NodeJS and Browser)</a></li>
</ul>
<p>Below you can find an overview of the specifications that they implement
as they relate to Waku.
This includes Waku legacy specifications, as they are used for bridging between the two networks.</p>
<div class="table-wrapper"><table><thead><tr><th>Spec</th><th>nim-waku (Nim)</th><th>go-waku (Go)</th><th>js-waku (Node JS)</th><th>js-waku (Browser JS)</th></tr></thead><tbody>
<tr><td><a href="/waku/standards/legacy/6/waku1.html">6/WAKU1</a></td><td>✔</td><td></td><td></td><td></td></tr>
<tr><td><a href="/waku/standards/legacy/7/data.html">7/WAKU-DATA</a></td><td>✔</td><td>✔</td><td></td><td></td></tr>
<tr><td><a href="/waku/standards/legacy/8/mail.html">8/WAKU-MAIL</a></td><td>✔</td><td></td><td></td><td></td></tr>
<tr><td><a href="/waku/standards/legacy/9/rpc.html">9/WAKU-RPC</a></td><td>✔</td><td></td><td></td><td></td></tr>
<tr><td><a href="/waku/standards/core/10/waku2.html">10/WAKU2</a></td><td>✔</td><td>🚧</td><td>🚧</td><td>✔</td></tr>
<tr><td><a href="/waku/standards/core/11/relay.html">11/WAKU2-RELAY</a></td><td>✔</td><td>✔</td><td>✔</td><td>✔</td></tr>
<tr><td><a href="/waku/standards/core/12/filter.html">12/WAKU2-FILTER</a></td><td>✔</td><td>✔</td><td></td><td></td></tr>
<tr><td><a href="/waku/standards/core/13/store.html">13/WAKU2-STORE</a></td><td>✔</td><td>✔</td><td>✔*</td><td>✔*</td></tr>
<tr><td><a href="/waku/standards/core/14/message.html">14/WAKU2-MESSAGE</a>)</td><td>✔</td><td>✔</td><td>✔</td><td>✔</td></tr>
<tr><td><a href="/waku/standards/core/15/bridge.html">15/WAKU2-BRIDGE</a></td><td>✔</td><td></td><td></td><td></td></tr>
<tr><td><a href="/waku/deprecated/16/rpc.html">16/WAKU2-RPC</a></td><td>✔</td><td></td><td></td><td></td></tr>
<tr><td><a href="/waku/standards/core/17/rln-relay.html">17/WAKU2-RLN-RELAY</a></td><td>🚧</td><td></td><td></td><td></td></tr>
<tr><td><a href="/waku/standards/application/18/swap.html">18/WAKU2-SWAP</a></td><td>🚧</td><td></td><td></td><td></td></tr>
<tr><td><a href="/waku/standards/core/19/lightpush.html">19/WAKU2-LIGHTPUSH</a></td><td>✔</td><td>✔</td><td>✔**</td><td>✔**</td></tr>
<tr><td><a href="/waku/standards/application/21/fault-tolerant-store.html">21/WAKU2-FAULT-TOLERANT-STORE</a></td><td>✔</td><td>✔</td><td></td><td></td></tr>
</tbody></table>
</div>
<p>*js-waku implements <a href="/waku/standards/core/13/store.html">13/WAKU2-STORE</a> as a querying node only.
**js-waku only implements <a href="/waku/standards/core/19/lightpush.html">19/WAKU2-LIGHTPUSH</a> requests.</p>
<h3 id="recommendations-for-clients"><a class="header" href="#recommendations-for-clients">Recommendations for Clients</a></h3>
<p>To implement a minimal Waku client,
we recommend implementing the following subset in the following order:</p>
<ul>
<li><a href="/waku/standards/core/10/waku2.html">10/WAKU2</a> - this specification</li>
<li><a href="/waku/standards/core/11/relay.html">11/WAKU2-RELAY</a> - for basic operation</li>
<li><a href="/waku/standards/core/14/message.html">14/WAKU2-MESSAGE</a> - version 0 (unencrypted)</li>
<li><a href="/waku/standards/core/13/store.html">13/WAKU2-STORE</a> - for historical messaging (query mode only)</li>
</ul>
<p>To get compatibility with Waku Legacy:</p>
<ul>
<li><a href="/waku/standards/legacy/7/data.html">7/WAKU-DATA</a></li>
<li><a href="/waku/standards/14/message.html">14/WAKU2-MESSAGE</a> - version 1 (encrypted with <code>7/WAKU-DATA</code>)</li>
</ul>
<p>For an interoperable keep-alive mechanism:</p>
<ul>
<li><a href="https://docs.libp2p.io/concepts/protocols/#ping">libp2p ping protocol</a>,
with periodic pings to connected peers</li>
</ul>
<h2 id="appendix-d-future-work"><a class="header" href="#appendix-d-future-work">Appendix D: Future work</a></h2>
<p>The following features are currently experimental,
under research and initial implementations:</p>
<p><strong>Economic Spam Resistance</strong>:</p>
<p>We aim to enable an incentivized spam protection technique
to enhance <code>11/WAKU2-RELAY</code> by using rate limiting nullifiers.
More details on this can be found in <a href="/waku/standards/core/17/rln-relay.html">17/WAKU2-RLN-RELAY</a>.
In this advanced method,
peers are limited to a certain rate of messaging per epoch and
an immediate financial penalty is enforced for spammers who break this rate.</p>
<p><strong>Prevention of Denial of Service (DoS) and Node Incentivization</strong>:
Denial of service signifies the case where an adversarial node
exhausts another node's service capacity (e.g., by making a large number of requests)
and makes it unavailable to the rest of the system.
DoS attack is to be mitigated through the accounting model as described in <a href="/waku/deprecated/18/swap.html">18/WAKU2-SWAP</a>.
In a nutshell, peers have to pay for the service they obtain from each other.
In addition to incentivizing the service provider,
accounting also makes DoS attacks costly for malicious peers.
The accounting model can be used in <code>13/WAKU2-STORE</code> and
<code>12/WAKU2-FILTER</code> to protect against DoS attacks.</p>
<p>Additionally, this gives node operators who provide a useful service to the network
an incentive to perform that service.
See <a href="/waku/deprecated/18/swap.html">18/WAKU2-SWAP</a>
for more details on this piece of work.</p>
<h2 id="copyright"><a class="header" href="#copyright">Copyright</a></h2>
<p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.</p>
<h2 id="references"><a class="header" href="#references">References</a></h2>
<ol>
<li>
<p><a href="https://github.com/libp2p/specs">libp2p specs</a></p>
</li>
<li>
<p><a href="/waku/standards/legacy/6/waku1.html">6/WAKU1</a></p>
</li>
<li>
<p><a href="https://eips.ethereum.org/EIPS/eip-627">Whisper spec (EIP627)</a></p>
</li>
<li>
<p><a href="https://vac.dev/waku-v2-plan">Waku v2 plan</a></p>
</li>
<li>
<p><a href="/waku/informational/30/adaptive-nodes.html">30/ADAPTIVE-NODES</a></p>
</li>
<li>
<p><a href="https://docs.libp2p.io/concepts/protocols/">Protocol Identifiers</a></p>
</li>
<li>
<p><a href="/waku/standards/core/14/message.html">14/WAKU2-MESSAGE</a></p>
</li>
<li>
<p><a href="/waku/standards/application/26/payload.html">26/WAKU-PAYLOAD</a></p>
</li>
<li>
<p><a href="/waku/informational/23/topics.html">23/WAKU2-TOPICS</a></p>
</li>
<li>
<p><a href="/waku/informational/27/peers.html">27/WAKU2-PEERS</a></p>
</li>
<li>
<p><a href="https://docs.libp2p.io/concepts/protocols/">bi-directional binary stream</a></p>
</li>
<li>
<p><a href="https://developers.google.com/protocol-buffers/docs/encoding#varints">Protobuf varint encoding</a></p>
</li>
<li>
<p><a href="/waku/standards/core/11/relay.html">11/WAKU2-RELAY spec</a></p>
</li>
<li>
<p><a href="/waku/standards/core/17/rln-relay.html">17/WAKU2-RLN-RELAY</a></p>
</li>
<li>
<p><a href="https://eips.ethereum.org/EIPS/eip-1459">EIP-1459</a></p>
</li>
<li>
<p><a href="https://docs.libp2p.io/concepts/publish-subscribe/#discovery">Ambient peer discovery</a></p>
</li>
<li>
<p><a href="https://github.com/ethereum/devp2p/blob/8fd5f7e1c1ec496a9d8dc1640a8548b8a8b5986b/discv5/discv5.md">Node Discovery v5</a></p>
</li>
<li>
<p><a href="https://github.com/waku-org/specs/blob/master/standards/core/enr.md">WAKU2-ENR</a></p>
</li>
<li>
<p><a href="https://eips.ethereum.org/EIPS/eip-778">EIP-778 ENR (Ethereum Node Records)</a></p>
</li>
<li>
<p><a href="/waku/standards/core/13/store.html">13/WAKU2-STORE spec</a></p>
</li>
<li>
<p><a href="/waku/standards/application/21/ft-store.html">21/WAKU2-FT-STORE</a></p>
</li>
<li>
<p><a href="/waku/standards/core/12/filter.html">12/WAKU2-FILTER</a></p>
</li>
<li>
<p><a href="/waku/standards/core/19/lightpush.html">19/WAKU2-LIGHTPUSH</a></p>
</li>
<li>
<p><a href="/waku/standards/legacy/7/data.html">7/WAKU-DATA</a></p>
</li>
<li>
<p><a href="/waku/standards/core/15/bridge.html">15/WAKU-BRIDGE</a></p>
</li>
<li>
<p><a href="https://www.privitar.com/blog/k-anonymity-an-introduction/">k-anonymity</a></p>
</li>
<li>
<p><a href="https://github.com/libp2p/specs/blob/master/pubsub/gossipsub/gossipsub-v1.1.md">GossipSub v1.1</a></p>
</li>
<li>
<p><a href="https://github.com/status-im/nim-waku/">nim-waku (Nim)</a></p>
</li>
<li>
<p><a href="https://github.com/status-im/go-waku/">go-waku (Go)</a></p>
</li>
<li>
<p><a href="https://github.com/status-im/js-waku/">js-waku (NodeJS and Browser)</a></p>
</li>
<li>
<p><a href="/waku/standards/legacy/8/mail.html">8/WAKU-MAIL</a></p>
</li>
<li>
<p><a href="/waku/standards/legacy/9/rpc.html">9/WAKU-RPC</a></p>
</li>
<li>
<p><a href="waku/deprecated/16/rpc.html">16/WAKU2-RPC</a></p>
</li>
<li>
<p><a href="waku/deprecated/18/swap.html">18/WAKU2-SWAP spec</a></p>
</li>
<li>
<p><a href="../../application/21/fault-tolerant-store.html">21/WAKU2-FAULT-TOLERANT-STORE</a></p>
</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../../waku/standards/core/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../../../waku/standards/core/11/relay.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../../waku/standards/core/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../../../waku/standards/core/11/relay.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../../elasticlunr.min.js"></script>
        <script src="../../../../mark.min.js"></script>
        <script src="../../../../searcher.js"></script>

        <script src="../../../../clipboard.min.js"></script>
        <script src="../../../../highlight.js"></script>
        <script src="../../../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../../../scripts/rfc-index.js"></script>


    </div>
    </body>
</html>
