<!DOCTYPE HTML>
<html lang="en" class="ayu" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>64/WAKU2-NETWORK - Logos LIP</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../../../favicon.svg">
        <link rel="shortcut icon" href="../../../../favicon.png">
        <link rel="stylesheet" href="../../../../css/variables.css">
        <link rel="stylesheet" href="../../../../css/general.css">
        <link rel="stylesheet" href="../../../../css/chrome.css">
        <link rel="stylesheet" href="../../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../../highlight.css">
        <link rel="stylesheet" href="../../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../../../theme/katex/katex.min.css">
        <link rel="stylesheet" href="../../../../theme/fonts/fonts.css">
        <link rel="stylesheet" href="../../../../theme/FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../../custom.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('ayu')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../../../index.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="../../../../about.html">About</a></li><li class="chapter-item expanded "><a href="../../../../messaging/index.html"><strong aria-hidden="true">1.</strong> Messaging</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../messaging/standards/core/index.html"><strong aria-hidden="true">1.1.</strong> Standards - Core</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../messaging/standards/core/10/waku2.html"><strong aria-hidden="true">1.1.1.</strong> 10/WAKU2</a></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/core/11/relay.html"><strong aria-hidden="true">1.1.2.</strong> 11/WAKU2-RELAY</a></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/core/12/filter.html"><strong aria-hidden="true">1.1.3.</strong> 12/WAKU2-FILTER</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../messaging/standards/core/12/previous-versions/00/filter.html"><strong aria-hidden="true">1.1.3.1.</strong> 00 (previous)</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/core/13/store.html"><strong aria-hidden="true">1.1.4.</strong> 13/WAKU2-STORE</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../messaging/standards/core/13/previous-versions/00/store.html"><strong aria-hidden="true">1.1.4.1.</strong> 00 (previous)</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/core/14/message.html"><strong aria-hidden="true">1.1.5.</strong> 14/WAKU2-MESSAGE</a></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/core/15/bridge.html"><strong aria-hidden="true">1.1.6.</strong> 15/WAKU-BRIDGE</a></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/core/17/rln-relay.html"><strong aria-hidden="true">1.1.7.</strong> 17/WAKU2-RLN-RELAY</a></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/core/19/lightpush.html"><strong aria-hidden="true">1.1.8.</strong> 19/WAKU2-LIGHTPUSH</a></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/core/31/enr.html"><strong aria-hidden="true">1.1.9.</strong> 31/WAKU2-ENR</a></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/core/33/discv5.html"><strong aria-hidden="true">1.1.10.</strong> 33/WAKU2-DISCV5</a></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/core/34/peer-exchange.html"><strong aria-hidden="true">1.1.11.</strong> 34/WAKU2-PEER-EXCHANGE</a></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/core/36/bindings-api.html"><strong aria-hidden="true">1.1.12.</strong> 36/WAKU2-BINDINGS-API</a></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/core/64/network.html" class="active"><strong aria-hidden="true">1.1.13.</strong> 64/WAKU2-NETWORK</a></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/core/66/metadata.html"><strong aria-hidden="true">1.1.14.</strong> 66/WAKU2-METADATA</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/application/index.html"><strong aria-hidden="true">1.2.</strong> Standards - Application</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../messaging/standards/application/20/toy-eth-pm.html"><strong aria-hidden="true">1.2.1.</strong> 20/TOY-ETH-PM</a></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/application/26/payload.html"><strong aria-hidden="true">1.2.2.</strong> 26/WAKU2-PAYLOAD</a></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/application/53/x3dh.html"><strong aria-hidden="true">1.2.3.</strong> 53/WAKU2-X3DH</a></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/application/54/x3dh-sessions.html"><strong aria-hidden="true">1.2.4.</strong> 54/WAKU2-X3DH-SESSIONS</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/legacy/index.html"><strong aria-hidden="true">1.3.</strong> Standards - Legacy</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../messaging/standards/legacy/6/waku1.html"><strong aria-hidden="true">1.3.1.</strong> 6/WAKU1</a></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/legacy/7/data.html"><strong aria-hidden="true">1.3.2.</strong> 7/WAKU-DATA</a></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/legacy/8/mail.html"><strong aria-hidden="true">1.3.3.</strong> 8/WAKU-MAIL</a></li><li class="chapter-item expanded "><a href="../../../../messaging/standards/legacy/9/rpc.html"><strong aria-hidden="true">1.3.4.</strong> 9/WAKU-RPC</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../messaging/informational/index.html"><strong aria-hidden="true">1.4.</strong> Informational</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../messaging/informational/22/toy-chat.html"><strong aria-hidden="true">1.4.1.</strong> 22/TOY-CHAT</a></li><li class="chapter-item expanded "><a href="../../../../messaging/informational/23/topics.html"><strong aria-hidden="true">1.4.2.</strong> 23/WAKU2-TOPICS</a></li><li class="chapter-item expanded "><a href="../../../../messaging/informational/27/peers.html"><strong aria-hidden="true">1.4.3.</strong> 27/WAKU2-PEERS</a></li><li class="chapter-item expanded "><a href="../../../../messaging/informational/29/config.html"><strong aria-hidden="true">1.4.4.</strong> 29/WAKU2-CONFIG</a></li><li class="chapter-item expanded "><a href="../../../../messaging/informational/30/adaptive-nodes.html"><strong aria-hidden="true">1.4.5.</strong> 30/ADAPTIVE-NODES</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../messaging/deprecated/index.html"><strong aria-hidden="true">1.5.</strong> Deprecated</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../messaging/deprecated/5/waku0.html"><strong aria-hidden="true">1.5.1.</strong> 5/WAKU0</a></li><li class="chapter-item expanded "><a href="../../../../messaging/deprecated/16/rpc.html"><strong aria-hidden="true">1.5.2.</strong> 16/WAKU2-RPC</a></li><li class="chapter-item expanded "><a href="../../../../messaging/deprecated/18/swap.html"><strong aria-hidden="true">1.5.3.</strong> 18/WAKU2-SWAP</a></li><li class="chapter-item expanded "><a href="../../../../messaging/deprecated/fault-tolerant-store.html"><strong aria-hidden="true">1.5.4.</strong> 21/WAKU2-FAULT-TOLERANT-STORE</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../blockchain/index.html"><strong aria-hidden="true">2.</strong> Blockchain</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../blockchain/raw/index.html"><strong aria-hidden="true">2.1.</strong> Raw</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../blockchain/raw/bedrock-anonymous-leaders-reward.html"><strong aria-hidden="true">2.1.1.</strong> BEDROCK-ANONYMOUS-LEADERS-REWARD</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/bedrock-architecture-overview.html"><strong aria-hidden="true">2.1.2.</strong> BEDROCK-ARCHITECTURE-OVERVIEW</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/bedrock-genesis-block.html"><strong aria-hidden="true">2.1.3.</strong> BEDROCK-GENESIS-BLOCK</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/bedrock-service-declaration-protocol.html"><strong aria-hidden="true">2.1.4.</strong> BEDROCK-SERVICE-DECLARATION-PROTOCOL</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/bedrock-service-reward-distribution.html"><strong aria-hidden="true">2.1.5.</strong> BEDROCK-SERVICE-REWARD-DISTRIBUTION</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/bedrock-v1.1-block-construction.html"><strong aria-hidden="true">2.1.6.</strong> BEDROCK-V1-1-BLOCK-CONSTRUCTION</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/bedrock-v1.1-mantle-specification.html"><strong aria-hidden="true">2.1.7.</strong> BEDROCK-V1.1-MANTLE-SPECIFICATION</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/fork-choice.html"><strong aria-hidden="true">2.1.8.</strong> CRYPTARCHIA-FORK-CHOICE</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/cryptarchia-proof-of-leadership.html"><strong aria-hidden="true">2.1.9.</strong> CRYPTARCHIA-PROOF-OF-LEADERSHIP</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/cryptarchia-total-stake-inference.html"><strong aria-hidden="true">2.1.10.</strong> CRYPTARCHIA-TOTAL-STAKE-INFERENCE</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/cryptarchia-v1-bootstr-sync.html"><strong aria-hidden="true">2.1.11.</strong> CRYPTARCHIA-V1-BOOTSTRAPPING-SYNCHRONIZATION</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/nomos-blend-protocol.html"><strong aria-hidden="true">2.1.12.</strong> NOMOS-BLEND-PROTOCOL</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/nomos-cryptarchia-v1-protocol.html"><strong aria-hidden="true">2.1.13.</strong> NOMOS-CRYPTARCHIA-V1-PROTOCOL</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/nomosda-network.html"><strong aria-hidden="true">2.1.14.</strong> NOMOS-DA-NETWORK</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/digital-signature.html"><strong aria-hidden="true">2.1.15.</strong> NOMOS-DIGITAL-SIGNATURE</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/nomos-key-types-and-generation.html"><strong aria-hidden="true">2.1.16.</strong> NOMOS-KEY-TYPES-GENERATION</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/nomos-message-encapsulation.html"><strong aria-hidden="true">2.1.17.</strong> NOMOS-MESSAGE-ENCAPSULATION</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/nomos-message-formatting.html"><strong aria-hidden="true">2.1.18.</strong> NOMOS-MESSAGE-FORMATTING</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/p2p-network.html"><strong aria-hidden="true">2.1.19.</strong> NOMOS-P2P-NETWORK</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/nomos-payload-formatting.html"><strong aria-hidden="true">2.1.20.</strong> NOMOS-PAYLOAD-FORMATTING</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/nomos-proof-of-quota.html"><strong aria-hidden="true">2.1.21.</strong> NOMOS-PROOF-OF-QUOTA</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/nomos-wallet-technical-standard.html"><strong aria-hidden="true">2.1.22.</strong> NOMOS-WALLET-TECHNICAL-STANDARD</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/da-cryptographic-protocol.html"><strong aria-hidden="true">2.1.23.</strong> NOMOSDA-CRYPTOGRAPHIC-PROTOCOL</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/da-rewarding.html"><strong aria-hidden="true">2.1.24.</strong> NOMOSDA-REWARDING</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/p2p-hardware-requirements.html"><strong aria-hidden="true">2.1.25.</strong> P2P-HARDWARE-REQUIREMENTS</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/p2p-nat-solution.html"><strong aria-hidden="true">2.1.26.</strong> P2P-NAT-SOLUTION</a></li><li class="chapter-item expanded "><a href="../../../../blockchain/raw/p2p-network-bootstrapping.html"><strong aria-hidden="true">2.1.27.</strong> P2P-NETWORK-BOOTSTRAPPING</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../blockchain/deprecated/index.html"><strong aria-hidden="true">2.2.</strong> Deprecated</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../blockchain/deprecated/claro.html"><strong aria-hidden="true">2.2.1.</strong> CONSENSUS-CLARO</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../storage/index.html"><strong aria-hidden="true">3.</strong> Storage</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../storage/raw/index.html"><strong aria-hidden="true">3.1.</strong> Raw</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../storage/raw/codex-block-exchange.html"><strong aria-hidden="true">3.1.1.</strong> CODEX-BLOCK-EXCHANGE</a></li><li class="chapter-item expanded "><a href="../../../../storage/raw/community-history.html"><strong aria-hidden="true">3.1.2.</strong> CODEX-COMMUNITY-HISTORY</a></li><li class="chapter-item expanded "><a href="../../../../storage/raw/dht.html"><strong aria-hidden="true">3.1.3.</strong> CODEX-DHT</a></li><li class="chapter-item expanded "><a href="../../../../storage/raw/manifest.html"><strong aria-hidden="true">3.1.4.</strong> CODEX-MANIFEST</a></li><li class="chapter-item expanded "><a href="../../../../storage/raw/codex-store.html"><strong aria-hidden="true">3.1.5.</strong> CODEX-STORE</a></li><li class="chapter-item expanded "><a href="../../../../storage/raw/dataset-store.html"><strong aria-hidden="true">3.1.6.</strong> DATASET-STORE</a></li><li class="chapter-item expanded "><a href="../../../../storage/raw/datasets.html"><strong aria-hidden="true">3.1.7.</strong> DATASETS</a></li><li class="chapter-item expanded "><a href="../../../../storage/raw/merkle-tree.html"><strong aria-hidden="true">3.1.8.</strong> MERKLE-TREE</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../storage/deprecated/index.html"><strong aria-hidden="true">3.2.</strong> Deprecated</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../storage/deprecated/erasure-coding.html"><strong aria-hidden="true">3.2.1.</strong> CODEX-ERASUE-CODING</a></li><li class="chapter-item expanded "><a href="../../../../storage/deprecated/codex-marketplace.html"><strong aria-hidden="true">3.2.2.</strong> CODEX-MARKETPLACE</a></li><li class="chapter-item expanded "><a href="../../../../storage/deprecated/codex-merkle-tree.html"><strong aria-hidden="true">3.2.3.</strong> CODEX-MERKLE-TREE</a></li><li class="chapter-item expanded "><a href="../../../../storage/deprecated/codex-prover.html"><strong aria-hidden="true">3.2.4.</strong> CODEX-PROVER</a></li><li class="chapter-item expanded "><a href="../../../../storage/deprecated/slot-buIlder.html"><strong aria-hidden="true">3.2.5.</strong> CODEX-SLOT-BUILDER</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../ift-ts/index.html"><strong aria-hidden="true">4.</strong> IFT-TS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/index.html"><strong aria-hidden="true">4.1.</strong> Raw</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/1/coss.html"><strong aria-hidden="true">4.1.1.</strong> 1/COSS</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/2/mvds.html"><strong aria-hidden="true">4.1.2.</strong> 2/MVDS</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/3/remote-log.html"><strong aria-hidden="true">4.1.3.</strong> 3/REMOTE-LOG</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/4/mvds-meta.html"><strong aria-hidden="true">4.1.4.</strong> 4/MVDS-META</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/25/libp2p-dns-discovery.html"><strong aria-hidden="true">4.1.5.</strong> 25/LIBP2P-DNS-DISCOVERY</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/32/rln-v1.html"><strong aria-hidden="true">4.1.6.</strong> 32/RLN-V1</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/decentralized-messaging-ethereum.html"><strong aria-hidden="true">4.1.7.</strong> ETH-DCGKA</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/eth-mls-offchain.html"><strong aria-hidden="true">4.1.8.</strong> ETH-MLS-OFFCHAIN</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/eth-mls-onchain.html"><strong aria-hidden="true">4.1.9.</strong> ETH-MLS-ONCHAIN</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/deleted/eth-secpm.html"><strong aria-hidden="true">4.1.10.</strong> ETH-SECPM</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/extended-kad-disco.html"><strong aria-hidden="true">4.1.11.</strong> EXTENDED-KADEMLIA-DISCOVERY</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/extensible-peer-records.html"><strong aria-hidden="true">4.1.12.</strong> EXTENSIBLE-PEER-RECORDS</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/gossipsub-tor-push.html"><strong aria-hidden="true">4.1.13.</strong> GOSSIPSUB-TOR-PUSH</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/consensus-hashgraphlike.html"><strong aria-hidden="true">4.1.14.</strong> HASHGRAPHLIKE CONSENSUS</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/logos-capability-discovery.html"><strong aria-hidden="true">4.1.15.</strong> LOGOS-CAPABILITY-DISCOVERY</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/mix.html"><strong aria-hidden="true">4.1.16.</strong> MIX</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/multi-message_id-burn-rln.html"><strong aria-hidden="true">4.1.17.</strong> Multi-message_id Burn RLN</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/noise-x3dh-double-ratchet.html"><strong aria-hidden="true">4.1.18.</strong> NOISE-X3DH-DOUBLE-RATCHET</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/mix-spam-protection-rln.html"><strong aria-hidden="true">4.1.19.</strong> RLN DoS Protection for Mixnet</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/rln-interep-spec.html"><strong aria-hidden="true">4.1.20.</strong> RLN-INTEREP-SPEC</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/rln-stealth-commitments.html"><strong aria-hidden="true">4.1.21.</strong> RLN-STEALTH-COMMITMENTS</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/rln-v2.html"><strong aria-hidden="true">4.1.22.</strong> RLN-V2</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/sds.html"><strong aria-hidden="true">4.1.23.</strong> SDS</a></li><li class="chapter-item expanded "><a href="../../../../ift-ts/raw/zerokit-api.html"><strong aria-hidden="true">4.1.24.</strong> Zerokit API</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../ift-ts/template.html"><strong aria-hidden="true">4.2.</strong> TEMPLATE</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Logos LIP</h1>

                    <div class="right-buttons">
                        <a href="../../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/vacp2p/rfc-index" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="64waku2-network"><a class="header" href="#64waku2-network">64/WAKU2-NETWORK</a></h1>
<div class="table-wrapper"><table><thead><tr><th>Field</th><th>Value</th></tr></thead><tbody>
<tr><td>Name</td><td>Waku v2 Network</td></tr>
<tr><td>Slug</td><td>64</td></tr>
<tr><td>Status</td><td>draft</td></tr>
<tr><td>Category</td><td>Best Current Practice</td></tr>
<tr><td>Editor</td><td>Hanno Cornelius <a href="mailto:hanno@status.im">hanno@status.im</a></td></tr>
</tbody></table>
</div><!-- timeline:start -->
<h2 id="timeline"><a class="header" href="#timeline">Timeline</a></h2>
<ul>
<li><strong>2026-01-16</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/f01d5b9d9f2ef977b8c089d616991b24f2ee4efe/docs/messaging/standards/core/64/network.md"><code>f01d5b9</code></a> — chore: fix links (#260)</li>
<li><strong>2026-01-16</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/89f2ea89fc1d69ab238b63c7e6fb9e4203fd8529/docs/messaging/standards/core/64/network.md"><code>89f2ea8</code></a> — Chore/mdbook updates (#258)</li>
<li><strong>2025-12-22</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/0f1855edcf68ef982c4ce478b67d660809aa9830/docs/waku/standards/core/64/network.md"><code>0f1855e</code></a> — Chore/fix headers (#239)</li>
<li><strong>2025-12-22</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/b1a578393edf8487ccc97a5f25b25af9bf41efb3/docs/waku/standards/core/64/network.md"><code>b1a5783</code></a> — Chore/mdbook updates (#237)</li>
<li><strong>2025-12-18</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/d03e699084774ebecef9c6d4662498907c5e2080/docs/waku/standards/core/64/network.md"><code>d03e699</code></a> — ci: add mdBook configuration (#233)</li>
<li><strong>2025-02-25</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/0277fd0c4dbd907dfb2f0c28b6cde94a335e1fae/waku/standards/core/64/network.md"><code>0277fd0</code></a> — docs: update dead links in 64/Network (#133)</li>
<li><strong>2024-09-13</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/3ab314d87d4525ff1296bf3d9ec634d570777b91/waku/standards/core/64/network.md"><code>3ab314d</code></a> — Fix Files for Linting (#94)</li>
<li><strong>2024-07-09</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/77029a2e648317bff0f50623e7e03862115cee5c/waku/standards/core/64/network.md"><code>77029a2</code></a> — Add RLNv2 to TheWakuNetwork (#82)</li>
<li><strong>2024-05-10</strong> — <a href="https://github.com/vacp2p/rfc-index/blob/e5b859abfb3e42fde4336e5fc5b4e7250126f8ce/waku/standards/core/64/network.md"><code>e5b859a</code></a> — Update WAKU2-NETWORK: Move to draft (#5)</li>
</ul>
<!-- timeline:end -->
<h2 id="abstract"><a class="header" href="#abstract">Abstract</a></h2>
<p>This specification describes an opinionated deployment of <a href="../10/waku2.html">10/WAKU2</a>
protocols to form a coherent and
shared decentralized messaging network that is open-access,
useful for generalized messaging, privacy-preserving, scalable and
accessible even to resource-restricted devices.
We'll refer to this opinionated deployment simply as
<em>the public Waku Network</em>, <em>the Waku Network</em> or, if the context is clear, <em>the network</em>
in the rest of this document.
All The Waku Network configuration parameters are listed <a href="https://github.com/waku-org/nwaku/blob/8bfad3ab453f96ac545c7cb0af06d0c0f34d1356/waku/factory/networks_config.nim#L31">here</a>.</p>
<h2 id="theory--semantics"><a class="header" href="#theory--semantics">Theory / Semantics</a></h2>
<h3 id="routing-protocol"><a class="header" href="#routing-protocol">Routing protocol</a></h3>
<p>The Waku Network is built on the
<a href="../17/rln-relay.html">17/WAKU2-RLN-RELAY</a> routing protocol,
which in turn is an extension of
<a href="../11/relay.html">11/WAKU2-RELAY</a> with spam protection measures.</p>
<h3 id="network-shards"><a class="header" href="#network-shards">Network shards</a></h3>
<p>Traffic in the Waku Network is sharded into eight
<a href="../17/rln-relay.html">17/WAKU2-RLN-RELAY</a> pubsub topics.
Each pubsub topic is named according to the static shard naming format
defined in <a href="https://github.com/waku-org/specs/blob/master/standards/core/relay-sharding.md">WAKU2-RELAY-SHARDING</a>
with:</p>
<ul>
<li><code>&lt;cluster_id&gt;</code> set to <code>1</code></li>
<li><code>&lt;shard_number&gt;</code> occupying the range <code>0</code> to <code>7</code>.
In other words, the Waku Network is a <a href="../17/rln-relay.html">17/WAKU2-RLN-RELAY</a> network
routed on the combination of the eight pubsub topics:</li>
</ul>
<pre><code class="language-text">/waku/2/rs/1/0
/waku/2/rs/1/1
...
/waku/2/rs/1/7
</code></pre>
<p>A node MUST use <a href="../66/metadata.html">66/WAKU2-METADATA</a>
protocol to identify the <code>&lt;cluster_id&gt;</code> that every
inbound/outbound peer that attempts to connect supports.
In any of the following cases, the node MUST trigger a disconnection:</p>
<ul>
<li><a href="../66/metadata.html">66/WAKU2-METADATA</a>
dial fails.</li>
<li><a href="../66/metadata.html">66/WAKU2-METADATA</a>
reports an empty <code>&lt;cluster_id&gt;</code>.</li>
<li><a href="../66/metadata.html">66/WAKU2-METADATA</a>
reports a <code>&lt;cluster_id&gt;</code> different than <code>1</code>.</li>
</ul>
<h2 id="roles"><a class="header" href="#roles">Roles</a></h2>
<p>There are two distinct roles evident in the network, those of:</p>
<ol>
<li>nodes, and</li>
<li>applications.</li>
</ol>
<h3 id="nodes"><a class="header" href="#nodes">Nodes</a></h3>
<p>Nodes are the individual software units
using <a href="../10/waku2.html">10/WAKU2</a> protocols to form a p2p messaging network.
Nodes, in turn, can participate in a shard as full relayers, i.e. <em>relay nodes</em>,
or by running a combination of protocols suitable for resource-restricted environments,
i.e. <em>non-relay nodes</em>.
Nodes can also provide various services to the network,
such as storing historical messages or protecting the network against spam.
See the section on <a href="#default-services">default services</a> for more.</p>
<h4 id="relay-nodes"><a class="header" href="#relay-nodes">Relay nodes</a></h4>
<p>Relay nodes MUST follow <a href="../17/rln-relay.html">17/WAKU2-RLN-RELAY</a>
to route messages to other nodes in the network
for any of the pubsub topics <a href="#network-shards">defined as the Waku Network shards</a>.
Relay nodes MAY choose to subscribe to any of these shards,
but MUST be subscribed to at least one defined shard.
Each relay node SHOULD be subscribed to as many shards as it has resources to support.
If a relay node supports an encapsulating application,
it SHOULD be subscribed to all the shards servicing that application.
If resource restrictions prevent a relay node from servicing all shards
used by the encapsulating application,
it MAY choose to support some shards as a non-relay node.</p>
<h4 id="bootstrapping-and-discovery"><a class="header" href="#bootstrapping-and-discovery">Bootstrapping and discovery</a></h4>
<p>Nodes MAY use any method to bootstrap connection to the network,
but it is RECOMMENDED that each node retrieves a list of bootstrap peers to connect
to using <a href="https://eips.ethereum.org/EIPS/eip-1459">EIP-1459 DNS-based discovery</a>.
Relay nodes SHOULD use <a href="../33/discv5.html">33/WAKU2-DISCV5</a> to continually discover
other peers in the network.
Each relay node MUST encode its supported shards into its discoverable ENR,
as described in <a href="https://github.com/waku-org/specs/blob/master/standards/core/relay-sharding.md/#discovery">WAKU2-RELAY-SHARDING</a>.
The ENR MUST be updated if the set of supported shards change.
A node MAY choose to ignore discovered peers that do not support any of the shards
in its own subscribed set.</p>
<h4 id="transports"><a class="header" href="#transports">Transports</a></h4>
<p>Relay nodes MUST follow <a href="../10/waku2.html">10/WAKU2</a> specifications with regards
to supporting different transports.
If TCP transport is available,
each relay node MUST support it as transport for both dialing and listening.
In addition,
a relay node SHOULD support secure websockets for bidirectional communication streams,
for example to allow connections from and to web browser-based clients.
A relay node MAY support unsecure websockets if required by the application or
running environment.</p>
<h4 id="default-services"><a class="header" href="#default-services">Default services</a></h4>
<p>For each supported shard,
each relay node SHOULD enable and support the following protocols as a service node:</p>
<ol>
<li><a href="../12/filter.html">12/WAKU2-FILTER</a> to allow resource-restricted peers to subscribe
to messages matching a specific content filter.</li>
<li><a href="../13/store.html">13/WAKU2-STORE</a> to allow other peers to request historical messages
from this node.</li>
<li><a href="../19/lightpush.html">19/WAKU2-LIGHTPUSH</a> to allow resource-restricted peers to
request publishing a message to the network on their behalf.</li>
<li><a href="https://github.com/waku-org/specs/blob/master/standards/core/peer-exchange.md">WAKU2-PEER-EXCHANGE</a>
to allow resource-restricted peers to discover more peers
in a resource efficient way.</li>
</ol>
<h4 id="store-service-nodes"><a class="header" href="#store-service-nodes">Store service nodes</a></h4>
<p>Each relay node SHOULD support <a href="../13/store.html">13/WAKU2-STORE</a>
as a store service node, for each supported shard.
The store SHOULD be configured to retain at least <code>12</code> hours of messages
per supported shard.
Store service nodes SHOULD only store messages
with a valid <a href="#message-attributes"><code>rate_limit_proof</code></a> attribute.</p>
<h4 id="non-relay-nodes"><a class="header" href="#non-relay-nodes">Non-relay nodes</a></h4>
<p>Nodes MAY opt out of relay functionality on any network shard
and instead request services from relay nodes as clients
using any of the defined service protocols:</p>
<ol>
<li><a href="../12/filter.html">12/WAKU2-FILTER</a>
to subscribe to messages matching a specific content filter.</li>
<li><a href="../13/store.html">13/WAKU2-STORE</a>
to request historical messages matching a specific content filter.</li>
<li><a href="../19/lightpush.html">19/WAKU2-LIGHTPUSH</a>
to request publishing a message to the network.</li>
<li><a href="https://github.com/waku-org/specs/blob/master/standards/core/peer-exchange.md">WAKU2-PEER-EXCHANGE</a>
to discover more peers in a resource efficient way.</li>
</ol>
<h4 id="store-client-nodes"><a class="header" href="#store-client-nodes">Store client nodes</a></h4>
<p>Nodes MAY request historical messages from <a href="../13/store.html">13/WAKU2-STORE</a>
service nodes as store clients.
A store client SHOULD discard any messages retrieved from a store service node
that do not contain a valid <a href="#message-attributes"><code>rate_limit_proof</code></a> attribute.
The client MAY consider service nodes returning messages
without a valid <a href="#message-attributes"><code>rate_limit_proof</code></a> attribute as untrustworthy.
The mechanism by which this may happen is currently underdefined.</p>
<h3 id="applications"><a class="header" href="#applications">Applications</a></h3>
<p>Applications are the higher-layer projects or
platforms that make use of the generalized messaging capability of the network.
In other words,
an application defines a payload used in the various <a href="../10/waku2.html">10/WAKU2</a> protocols.
Any participant in an application SHOULD make use of an underlying node
in order to communicate on the network.
Applications SHOULD make use of an <a href="#autosharding">autosharding</a> API
to allow the underlying node to automatically select the target shard
on the Waku Network.
See the section on <a href="#autosharding">autosharding</a> for more.</p>
<h2 id="rln-rate-limiting"><a class="header" href="#rln-rate-limiting">RLN rate-limiting</a></h2>
<p>The <a href="../17/rln-relay.html">17/WAKU2-RLN-RELAY</a> protocol uses <a href="https://github.com/vacp2p/rfc-index/blob/a5b24ac0a27da361312260f9da372a0e6e812212/vac/raw/rln-v2.md">RLN-V2</a>
proofs to ensure that a pre-agreed rate limit
of <code>x</code> messages every <code>y</code> seconds is not exceeded by any publisher.
While the network is under capacity,
individual relayers MAY choose to freely route messages without RLN proofs
up to a discretionary bandwidth limit,
after which messages without proofs MUST be discarded by relay nodes.
This bandwidth limit SHOULD be enforced using a <a href="#free-bandwidth-exceeded">bandwidth validation mechanism</a>
separate from a RLN rate-limiting.
This implies that quality of service and
reliability is significantly lower for messages without proofs
and at times of high network utilization these messages may not be relayed at all.</p>
<h3 id="rln-parameters"><a class="header" href="#rln-parameters">RLN Parameters</a></h3>
<p>The Waku Network uses the following RLN parameters:</p>
<ul>
<li><code>rlnRelayUserMessageLimit=100</code>:
Amount of messages that a membership is allowed to publish per epoch.
Configurable between <code>0</code> and <code>MAX_MESSAGE_LIMIT</code>.</li>
<li><code>rlnEpochSizeSec=600</code>: Size of the epoch in seconds.</li>
<li><code>rlnRelayChainId=11155111</code>: Network in which the RLN contract is deployed,
aka Sepolia.</li>
<li><code>rlnRelayEthContractAddress=0xCB33Aa5B38d79E3D9Fa8B10afF38AA201399a7e3</code>:
Network address where RLN memberships are stored.</li>
<li><code>staked_fund=0</code>: In other words, the Waku Network does not use RLN staking.
Registering a membership just requires to pay gas.</li>
<li><code>MAX_MESSAGE_LIMIT=100</code>:
Maximum amount of messages allowed per epoch for any membership.
Enforced in the contract.</li>
<li><code>max_epoch_gap=20</code>: Maximum allowed gap in seconds into the past or
future compared to the validator's clock.</li>
</ul>
<p>Nodes MUST <em>reject</em> messages not respecting any of these parameters.
Nodes SHOULD use Network Time Protocol (NTP) to synchronize their own clocks,
thereby ensuring valid timestamps for proof generation and validation.
Publishers to the Waku Network SHOULD register an RLN membership.</p>
<h3 id="rln-proofs"><a class="header" href="#rln-proofs">RLN Proofs</a></h3>
<p>Each RLN member MUST generate and attach an RLN proof to every published message
as described in <a href="../17/rln-relay.html">17/WAKU2-RLN-RELAY</a> and <a href="https://github.com/vacp2p/rfc-index/blob/a5b24ac0a27da361312260f9da372a0e6e812212/vac/raw/rln-v2.md">RLN-V2</a>.
Slashing is not implemented for the Waku Network.
Instead, validators will penalise peers forwarding messages exceeding the rate limit
as specified for <a href="#rate-limit-exceeded">the rate-limiting validation mechanism</a>.
This incentivizes all relay nodes to validate RLN proofs
and reject messages violating rate limits
in order to continue participating in the network.</p>
<h2 id="network-traffic"><a class="header" href="#network-traffic">Network traffic</a></h2>
<p>All payload on the Waku Network MUST be encapsulated in a <a href="../14/message.html">14/WAKU2-MESSAGE</a>
with rate limit proof extensions defined for <a href="../17/rln-relay.html">17/WAKU2-RLN-RELAY</a>.
Each message on the Waku Network SHOULD be validated by each relayer,
according to the rules discussed under <a href="#message-validation">message validation</a>.</p>
<h3 id="message-attributes"><a class="header" href="#message-attributes">Message Attributes</a></h3>
<ul>
<li>The mandatory <code>payload</code> attribute MUST contain the message data payload
as crafted by the application.</li>
<li>The mandatory <code>content_topic</code> attribute MUST specify a string identifier
that can be used for content-based filtering.
This is also crafted by the application.
See <a href="#autosharding">Autosharding</a> for more on the content topic format.</li>
<li>The optional <code>meta</code> attribute MAY be omitted.
If present, will form part of the message uniqueness vector described in <a href="../14/message.html">14/WAKU2-MESSAGE</a>.</li>
<li>The optional <code>version</code> attribute SHOULD be set to <code>0</code>.
It MUST be interpreted as <code>0</code> if not present.</li>
<li>The mandatory <code>timestamp</code> attribute MUST contain the Unix epoch time
at which the message was generated by the application.
The value MUST be in nanoseconds.
It MAY contain a fudge factor of up to 1 seconds in either direction
to improve resistance to timing attacks.</li>
<li>The optional <code>ephemeral</code> attribute MUST be set to <code>true</code>,
if the message should not be persisted by the Waku Network.</li>
<li>The optional <code>rate_limit_proof</code> attribute SHOULD be populated with the RLN proof
as set out in <a href="#rln-proofs">RLN Proofs</a>.
Messages with this field unpopulated MAY be discarded from the network by relayers.
This field MUST be populated if the message should be persisted by the Waku Network.</li>
</ul>
<h3 id="message-size"><a class="header" href="#message-size">Message Size</a></h3>
<p>Any <a href="../14/message.html">14/WAKU2-MESSAGE</a> published to the network
MUST NOT exceed an absolute maximum size of <code>150</code> kilobytes.
This limit applies to the entire message after protobuf serialization,
including attributes.
It is RECOMMENDED not to exceed an average size of <code>4</code> kilobytes
for <a href="../14/message.html">14/WAKU2-MESSAGE</a> published to the network.</p>
<h3 id="message-validation"><a class="header" href="#message-validation">Message Validation</a></h3>
<p>Relay nodes MUST apply <a href="https://github.com/libp2p/specs/blob/master/pubsub/gossipsub/gossipsub-v1.1.md#extended-validators">gossipsub v1.1 validation</a>
to each relayed message and
SHOULD apply all of the rules set out in the section below
to determine the validity of a message.
Validation has one of three outcomes,
repeated here from the <a href="https://github.com/libp2p/specs/blob/master/pubsub/gossipsub/gossipsub-v1.1.md#extended-validators">gossipsub specification</a>
for ease of reference:</p>
<ol>
<li>Accept - the message is considered valid and
it MUST be delivered and forwarded to the network.</li>
<li>Reject - the message is considered invalid, MUST be rejected and
SHOULD trigger a gossipsub scoring penalty against the transmitting peer.</li>
<li>Ignore - the message SHOULD NOT be delivered and forwarded to the network,
but this MUST NOT trigger a gossipsub scoring penalty against the transmitting peer.</li>
</ol>
<p>The following validation rules are defined:</p>
<h4 id="decoding-failure"><a class="header" href="#decoding-failure">Decoding failure</a></h4>
<p>If a message fails to decode as a valid <a href="../14/message.html">14/WAKU2-MESSAGE</a>,
the relay node MUST <em>reject</em> the message.
This SHOULD trigger a penalty against the transmitting peer.</p>
<h4 id="invalid-timestamp"><a class="header" href="#invalid-timestamp">Invalid timestamp</a></h4>
<p>If a message has a timestamp deviating by more than <code>20</code> seconds
either into the past or the future
when compared to the relay node's internal clock,
the relay node MUST <em>reject</em> the message.
This allows for some deviation between internal clocks,
network routing latency and
an optional <a href="#message-attributes">fudge factor when timestamping new messages</a>.</p>
<h4 id="free-bandwidth-exceeded"><a class="header" href="#free-bandwidth-exceeded">Free bandwidth exceeded</a></h4>
<p>If a message contains no RLN proof
and the current bandwidth utilization on the shard the message was published to
equals or exceeds <code>1</code> Mbps,
the relay node SHOULD <em>ignore</em> the message.</p>
<h4 id="invalid-rln-epoch"><a class="header" href="#invalid-rln-epoch">Invalid RLN epoch</a></h4>
<p>If a message contains an RLN proof
and the <code>epoch</code> attached to the proof deviates by more than <code>max_epoch_gap</code> seconds
from the relay node's own <code>epoch</code>,
the relay node MUST <em>reject</em> the message.
<code>max_epoch_gap</code> is <a href="#rln-parameters">set to <code>20</code> seconds</a> for the Waku Network.</p>
<h4 id="invalid-rln-proof"><a class="header" href="#invalid-rln-proof">Invalid RLN proof</a></h4>
<p>If a message contains an RLN proof
and the zero-knowledge proof is invalid
according to the verification process described in <a href="https://github.com/vacp2p/rfc-index/blob/a5b24ac0a27da361312260f9da372a0e6e812212/vac/raw/rln-v2.md">RLN-V2</a>,
the relay node MUST <em>ignore</em> the message.</p>
<h4 id="rate-limit-exceeded"><a class="header" href="#rate-limit-exceeded">Rate limit exceeded</a></h4>
<p>If a message contains an RLN proof
and the relay node detects double signaling
according to the verification process described in <a href="https://github.com/vacp2p/rfc-index/blob/a5b24ac0a27da361312260f9da372a0e6e812212/vac/raw/rln-v2.md">RLN-V2</a>,
the relay node MUST <em>reject</em> the message
for violating the agreed rate limit of <code>rlnRelayUserMessageLimit</code> messages
every <code>rlnEpochSizeSec</code> second.
This SHOULD trigger a penalty against the transmitting peer.</p>
<h2 id="autosharding"><a class="header" href="#autosharding">Autosharding</a></h2>
<p>Nodes in the Waku Network SHOULD allow encapsulating applications to use autosharding,
as defined in <a href="https://github.com/waku-org/specs/blob/master/standards/core/relay-sharding.md/#automatic-sharding">WAKU2-RELAY-SHARDING</a>
by automatically determining the appropriate pubsub topic
from the list <a href="#network-shards">of defined Waku Network shards</a>.
This allows the application to omit the target pubsub topic
when invoking any Waku protocol function.
Applications using autosharding MUST use content topics in the format
defined in <a href="https://github.com/waku-org/specs/blob/master/standards/core/relay-sharding.md/#content-topics-format-for-autosharding">WAKU2-RELAY-SHARDING</a>
and SHOULD use the short length format:</p>
<pre><code class="language-text">/{application-name}/{version-of-the-application}/{content-topic-name}/{encoding}
</code></pre>
<p>When an encapsulating application makes use of autosharding
the underlying node MUST determine the target pubsub topic(s)
from the content topics provided by the application
using the hashing mechanism defined in <a href="https://github.com/waku-org/specs/blob/master/standards/core/relay-sharding.md/#automatic-sharding">WAKU2-RELAY-SHARDING</a>.</p>
<h2 id="copyright"><a class="header" href="#copyright">Copyright</a></h2>
<p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.</p>
<h2 id="references"><a class="header" href="#references">References</a></h2>
<ul>
<li><a href="../10/waku2.html">10/WAKU2</a></li>
<li><a href="../17/rln-relay.html">17/WAKU2-RLN-RELAY</a></li>
<li><a href="../11/relay.html">11/WAKU2-RELAY</a></li>
<li><a href="https://github.com/waku-org/specs/blob/master/standards/core/relay-sharding.md">WAKU2-RELAY-SHARDING</a></li>
<li><a href="../66/metadata.html">66/WAKU2-METADATA</a></li>
<li><a href="https://eips.ethereum.org/EIPS/eip-1459">EIP-1459 DNS-based discovery</a></li>
<li><a href="../33/discv5.html">33/WAKU2-DISCV5</a></li>
<li><a href="../12/filter.html">12/WAKU2-FILTER</a></li>
<li><a href="../13/store.html">13/WAKU2-STORE</a></li>
<li><a href="../19/lightpush.html">19/WAKU2-LIGHTPUSH</a></li>
<li><a href="../34/peer-exchange.html">34/WAKU2-PEER-EXCHANGE</a></li>
<li><a href="../../../../ift-ts/raw/32/rln-v1.html">32/RLN-V1</a></li>
<li><a href="https://github.com/vacp2p/rfc-index/blob/a5b24ac0a27da361312260f9da372a0e6e812212/vac/raw/rln-v2.md">RLN-V2</a></li>
<li><a href="../14/message.html">14/WAKU2-MESSAGE</a></li>
<li><a href="https://github.com/libp2p/specs/blob/master/pubsub/gossipsub/gossipsub-v1.1.md#extended-validators">gossipsub v1.1 validation</a></li>
<li><a href="https://github.com/waku-org/specs/blob/master/standards/core/relay-sharding.md/">WAKU2-RELAY-SHARDING</a></li>
<li><a href="https://github.com/waku-org/nwaku/blob/master/waku/factory/networks_config.nim#L31">The Waku Network Config</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../../messaging/standards/core/36/bindings-api.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../../../messaging/standards/core/66/metadata.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../../messaging/standards/core/36/bindings-api.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../../../messaging/standards/core/66/metadata.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../../elasticlunr.min.js"></script>
        <script src="../../../../mark.min.js"></script>
        <script src="../../../../searcher.js"></script>

        <script src="../../../../clipboard.min.js"></script>
        <script src="../../../../highlight.js"></script>
        <script src="../../../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../../../theme/katex/katex.min.js"></script>
        <script src="../../../../theme/katex/auto-render.min.js"></script>
        <script src="../../../../scripts/katex-render.js"></script>
        <script src="../../../../scripts/rfc-index.js"></script>


    </div>
    </body>
</html>
