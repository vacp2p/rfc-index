---
title: LIBP2P-MIX
name:  Libp2p Mix Protocol
status: raw
category: Standards Track
tags:
editor: Akshaya Mani <akshaya@status.im>
contributors: Daniel Kaiser <danielkaiser@status.im>
---

## Abstract

The Mix Protocol defines a decentralized anonymous message routing layer for libp2p networks.
It enables sender anonymity by routing each message through a decentralized mix overlay network
composed of participating libp2p nodes, known as mix nodes. Each message is routed independently
in a stateless manner, allowing other libp2p protocols to selectively anonymize messages without
modifying their core protocol behavior.

## 1. Introduction

The Mix Protocol is a custom libp2p protocol that defines a message-layer routing abstraction
designed to provide sender anonymity in peer-to-peer systems built on the libp2p stack.
It addresses the absence of native anonymity primitives in libp2p by offering a modular,
content-agnostic protocol that other libp2p protocols can invoke when anonymity is required.

This document describes the design, behavior, and integration of the Mix Protocol within the
libp2p architecture. Rather than replacing or modifying existing libp2p protocols, the Mix Protocol
complements them by operating independently of connection state and protocol negotiation.
It is intended to be used as an optional anonymity layer that can be selectively applied on a
per-message basis.

Integration with other libp2p protocols is handled through external interface components&mdash;the Mix Entry
and Exit layers&mdash;which mediate between these protocols and the Mix Protocol instances.
These components allow applications to defer anonymity concerns to the Mix layer without altering
their native semantics or transport assumptions.

The rest of this document describes the motivation for the protocol, defines relevant terminology,
presents the protocol architecture, and explains how the Mix Protocol interoperates with the broader
libp2p protocol ecosystem.

## 2. Terminology

The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”,
“MAY”, and “OPTIONAL” in this document are to be interpreted as described in
[RFC 2119](https://datatracker.ietf.org/doc/html/rfc2119).

The following terms are used throughout this specification:

- **Origin Protocol**
  A libp2p protocol (_e.g.,_ Ping, GossipSub) that generates and receives the actual message payload.
  The origin protocol MUST decide on a per-message basis whether to route the message through the Mix Protocol
  or not.

- **Mix Node**
  A libp2p node that supports the Mix Protocol and participates in the mix network.
  A mix node may initiate the Mix Protocol _only_ for messages generated by origin protocols running
  locally on the same node.
  It may also be selected in the mix path for Sphinx packets originating elsewhere.

- **Mix Path**
  A non-repeating sequence of mix nodes through which a Sphinx packet is routed across the mix network.

- **Mixify**
  A per-message flag set by the origin protocol to indicate that a message should be routed using
  the Mix Protocol or not.
  Only messages with mixify set are forwarded to the Mix Entry Layer.
  Other messages SHOULD be routed using the origin protocol’s default behavior.

  The phrases 'messages to be mixified', 'to mixify a message' and related variants are used
  informally throughout this document to refer to messages that either have the `mixify` flag set
  or are selected to have it set.

- **Mix Entry Layer**
  A component that receives messages to be _mixified_ from an origin protocol and forwards them to the
  local Mix Protocol instance.
  The Entry Layer is external to the Mix Protocol.

- **Mix Exit Layer**
  A component that receives decrypted messages from a Mix Protocol instance and and delivers them
  to the appropriate origin protocol instance at the destination.
  Like the Entry Layer, it is external to the Mix Protocol.

- **Mixnet or Mix Network**
  A decentralized overlay network formed by all nodes that support the Mix Protocol.
  It operates independently of libp2p’s protocol-level routing and origin protocol behavior.

- **Sphinx Packet**
  A cryptographic packet format used by the Mix Protocol to encapsulate messages.
  It uses layered encryption to hide routing information and protect message contents as packets are forwarded hop-by-hop.
  Sphinx packets are fixed-size and indistinguishable from one another, providing unlinkability and metadata protection.

## 3. Motivation and Background

libp2p enables modular peer-to-peer applications, but it lacks built-in support for sender anonymity.
Most protocols expose persistent peer identifiers, transport metadata, or traffic patterns that
can be exploited to deanonymize users through passive observation or correlation.

While libp2p supports NAT traversal mechanisms such as Circuit Relay, these focus on connectivity
rather than anonymity. Relays may learn peer identities during stream setup and can observe traffic
timing and volume, offering no protection against metadata analysis.

libp2p also supports a Tor transport for network-level anonymity, tunneling traffic through long-lived,
encrypted circuits. However, Tor relies on session persistence and is ill-suited for protocols
requiring per-message unlinkability.

The Mix Protocol addresses this gap with a decentralized message routing layer based on classical
mix network principles. It applies layered encryption and per-hop delays to obscure both routing paths
and timing correlations. Each message is routed independently, pproviding resistance to traffic analysis
and protection against metadata leakage

By decoupling anonymity from connection state and transport negotiation, the Mix Protocol offers
a modular privacy abstraction that existing libp2p protocols can adopt without altering their
core behavior.
